---
title: 队列的最大值
author: 熊滔
category: 剑指offer
---

> 题目：请定义一个队列并实现函数 $max$ 得到队列里的最大值。

在之前我们实现过一个带有 $min$ 函数的栈，在那次的实现中，我们使用了一个辅助栈来存储栈中的最小值。在这道题的实现中，我们可以使用一个队列来存储队列中的最大值，这个队列是一个优先队列，我们可以很快的就可以获得队列的最大值，如下

```java
private static Deque<Integer> queue = new LinkedList<>();
private static PriorityQueue<Integer> priorityQueue = new PriorityQueue<>(new MyComparator());

public static void offer(int value) {
    queue.offer(value);
    priorityQueue.offer(value);
}
public static void poll() {
    Integer i = queue.poll();
    priorityQueue.remove(i);
}
public static Integer max() {
    return priorityQueue.peek();
}
```

> 题目：给定一个数组和滑动窗口的大小，请找出所有滑动窗口里的最大值。例如，如果输入数组 $[2, 3, 4, 2, 6, 2, 5, 1]$ 及滑动窗口的大小 $3$，那么一共存在 $6$ 个滑动窗口，它们的最大值分别为 $[4, 4, 6, 6, 6, 5]$。

实际上滑动窗口可以看做是一个队列，当滑动窗口滑动时，队首元素被删除，同时向队尾添加一个元素，而求滑动窗口的最大值，就是求这个队列中的最大值，我们可以使用上面带有 $max$ 函数的队列轻松的实现这个算法

```java
public static int[] maxSliderWindow(int[] data, int size) {
    if (data == null || data.length == 0) {
        return new int[0];
    }
    if (data.length < size) {
        return new int[0];
    }
    // 返回的滑动窗口最大值组成的数组
    int[] results = new int[data.length - size + 1];
    // 首先将前 size 个数字添加到队列中，形成第一个窗口
    for (int i = 0; i < size; i++) {
        offer(data[i]);
    }
    // 移动时，弹出队首元素，并向队尾添加元素
    for (int i = size; i < data.length; i++) {
        results[i - size] = max();
        poll();
        offer(data[i]);
    }
    results[results.length - 1] = max();
    return results;
}
```



<Disqus />