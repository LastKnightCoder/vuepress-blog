---
title: 礼物的最大价值
author: 熊滔
category: 剑指offer
---

> 题目：在一个 $m \times n$ 的棋盘的每一格都放有一个礼物，每个礼物都有一定的价值(价值大于 $0$)。你可以从棋盘的左上角开始拿格子里的礼物，并每次向左或向下移动一格，直到到达棋盘的右下角。给定一个棋盘及其上面的礼物，请计算你最多能拿到多少价值的礼物?

例如，对于如下棋盘，沿着标有下划线的数字的线路，就可以拿到最大价值的礼物

<img src="https://gitee.com/lastknightcoder/blogimage/raw/master/202006301752.svg" />

这是典型的能够使用动态规划解决的题，我们使用 $f(i, j)$ 表示达到坐标 $(i, j)$ 的格子时能够拿到的礼物总和的最大值。到达格子 $(i, j)$ 有两种方法，从左方 $(i - 1, j)$ 或者是从上方 $(i, j - 1)$ 到达，所以 $f(i ,j) = max[f(i-1, j), f(i, j - 1)] + gift(i, j)$，其中 $g(i, j)$ 表示格子 $(i, j)$ 上的礼物的价值。

```java
public static int getMaxGift(int[][] matrix) {
    if (matrix == null || matrix.length == 0 || matrix[0].length == 0) {
        return -1;
    }
    int rows = matrix.length;
    int columns = matrix[0].length;
    int[][] maxMatrix = new int[rows][columns];
    for (int row = 0; row < rows; row++) {
        for (int column = 0; column < columns; column++) {
            int left = 0;
            int up = 0;
            if (row > 0) {
                left = maxMatrix[row - 1][column];
            }
            if (column > 0) {
                up = maxMatrix[row][column - 1];
            }
            // f(i,j) = max[f(i-1,j),f(i,j-1)] + gift(i,j)
            maxMatrix[row][column] = Math.max(left, up) + matrix[row][column];
        }
    }
    return maxMatrix[rows - 1][columns - 1];
}
```



<Disqus />