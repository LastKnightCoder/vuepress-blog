---
title: 反转链表
author: 熊滔
category: 剑指offer
---

> 题目：定义一个函数，输入一个链表的头节点，反转该链表并输出反转后链表的头节点。链表节点定义如下：
>
> ```java
> private static class ListNode {
>        public ListNode next;
>        public int value;
>        public ListNode(int value) {
>            this.next = null;
>            this.value = value;
>        }
> }
> ```

我们反转节点，只要保存当前节点的前一个节点，当前节点和下一个节点

<img src="https://gitee.com/lastknightcoder/blogimage/raw/master/202006171229.svg"/>


我们将当前节点指向前一个节点，并且更新这三个指针，直到当前节点已到达尾节点

<img src="https://gitee.com/lastknightcoder/blogimage/raw/master/202006171230.svg"/>


代码如下

```java
public class ReverseList {
    private static class ListNode {
        public ListNode next;
        public int value;
        public ListNode(int value) {
            this.next = null;
            this.value = value;
        }
    }

    public static ListNode reverseList(ListNode root) {
        ListNode reverseRoot = null;
        ListNode curNode = root;
        ListNode preNode = null;
        while (curNode != null) {
            ListNode nextNode = curNode.next;
            if (nextNode == null) {
                reverseRoot = curNode;
            }
            // 当前节点指向前一个节点
            curNode.next = preNode;
            // 更新前一个节点个当前节点
            preNode = curNode;
            curNode = nextNode;
        }
        return reverseRoot;
    }

    public static void printList(ListNode root) {
        while (root != null) {
            if (root.next != null) {
                System.out.print(root.value + "->");
            } else {
                System.out.println(root.value);
            }
            root = root.next;
        }
    }

    public static void main(String[] args) {
        ListNode root = new ListNode(1);
        root.next = new ListNode(2);
        root.next.next = new  ListNode(3);
        printList(root); // 1->2->3
        root = reverseList(root);
        printList(root); // 3->2->1
    }
}
```

下面介绍另一种反转链表的方法，使用递归。使用递归一个重要的点就是明确函数的输入和输出，这样才好编写程序，这个函数它接受一个链表的根节点，返回反转链表的根节点，明确这一点之后，我们就可以编写下面的程序

```java
public static ListNode reverseListRecursion(ListNode root) {
    // 如果是尾结点，直接返回
    if (root.next == null) {
        return root;
    }
    // 获得反转链表的根节点
    ListNode last = reverseListRecursion(root.next);
    // 将下一个节点的下一个节点指向自己，即反转
    root.next.next = root;
    // 当前节点为反转链表的尾节点，next 指向 null
    root.next = null;
    // 返回反转链表的根节点
    return last;
}
```



<Disqus />