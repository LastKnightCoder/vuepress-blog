---
title: 调整数组顺序使奇数位于偶数之前
author: 熊滔
category: 剑指offer
---

> 题目：输入一个整数数组，实现一个函数来调整数组中数字的顺序，使得所有奇数位于数组的前半部分，所有偶数位于数组的后半部分。

如果熟悉快速排序的话，那么应该很容易想到这个问题与快速排序中的 `partition` 函数的功能差不多，`partition` 函数它是将数组小于某个数的元素放在数组前方，大于的放在后方，而这里是将奇数放在前方。

现在我们来讲讲方法，我们维护两个指针，一个叫做 `before`，一个叫做 `after`，我们定义在 `before` 之前的元素是奇数(包含 `before`)，在 `after` 之后的是偶数(包含 `after`)。首先两个指针分别指向数组的开头和结尾

<img src="https://gitee.com/lastknightcoder/blogimage/raw/master/202006131634.svg"/>

首先我们将 `before` 设置为 `-1`，`after` 设置为 `data.length`，我们定义一个 `cur` 指针来遍历数组，当碰到奇数时，将 `before` 和 `cur` 向前移动一步，当碰到偶数时，将 `after` 前的元素与 `cur` 所指的偶数进行交换，`after` 向后移动一步，`before` 和 `cur` 不变，接着继续判断交换来的数是偶数还是奇数，以此类推，知道 `cur` 指针与 `after` 指针相遇，则数组重组完成。

下图详细的画出了上述算法的详细过程

<img src="https://gitee.com/lastknightcoder/blogimage/raw/master/202006131704.svg"/>


程序如下

```java
public static void reorderOddEven(int[] data) {
    if (data == null) {
        return;
    }
    int before = -1;
    int after = data.length;
    int cur = 0;
    while (cur < after) {
        if (data[cur] % 2 == 1) {
            before++;
            cur++;
        } else {
            swap(data, cur, --after);
        }
    }
}

public static void swap(int[] data, int i, int j) {
    int temp = data[i];
    data[i] = data[j];
    data[j] = temp;
}
```

按道理这道题算是解完了，在这里我们做一个扩展，如果我们要将负数放在前面怎么办? 我们要将能被 `3` 整除的数放在前面怎么办? 可能你会说，我们将判断的条件改一下就可以，比如

```java
if (data[cur] < 0)
```

```java
if (data[cur] % 3 == 0)
```

但是如果你的函数是拿给别人用的呢，别人并不能修改你的函数，你应该使得这个方法具有自定义性，或者说传入一个函数给该函数，让该函数根据传入的函数来决定重组的规则。想到这里，我们需要定义一个接口

```java
public interface Group {
    public boolean group(int number);
}
```

修改上面的函数如下

```java
public static void reorderOddEven(int[] data, Group group) {
    if (data == null) {
        return;
    }
    int before = -1;
    int after = data.length;
    int cur = 0;
    while (cur < after) {
        if (group.group(data[cur])) {
            before++;
            cur++;
        } else {
            swap(data, cur, --after);
        }
    }
}
```

我们根据传入的函数(接口)的返回值决定什么样的元素排序在前方，测试如下

```java
public static void main(String[] args) {
    int[] data = {1, 2, -3, 4, -5, 9, 6, 3};
    // 被3整除的数在前方
    reorderOddEven(data, number -> number % 3 == 0);
    printArray(data); // [ 3, 6, -3, 9, -5, 4, 2, 1 ]
    // 负数在前方
    reorderOddEven(data, number -> number < 0);
    printArray(data); // [ -5, -3, 9, 6, 4, 2, 1, 3 ]
    // 奇数在前方
    reorderOddEven(data, number -> (number & 1) == 1);
    printArray(data); // [ -5, -3, 9, 3, 1, 2, 4, 6 ]
}
```

<Disqus />