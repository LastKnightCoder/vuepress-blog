<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>跑马灯动画 | Coder</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/2.10.0/github-markdown.min.css">
    <link rel="manifest" href="/vuepress-blog/manifest.webmanifest" crossorigin="use-credentials">
    <meta name="description" content="操千曲而后晓声，观千剑而后识器">
    <meta property="og:url" content="/vuepress-blog/%E9%9A%8F%E7%AC%94/%E8%B7%91%E9%A9%AC%E7%81%AF%E5%8A%A8%E7%94%BB.html">
    <meta property="og:site_name" content="Coder">
    <meta property="og:title" content="跑马灯动画">
    <meta property="og:type" content="article">
    <meta property="og:locale" content="en-US">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image:alt" content="Coder">
    <meta property="article:author" content="熊滔">
    <meta property="article:published_time" content="2021-07-02T00:00:00.000Z">
    <meta name="theme-color" content="#46bd87">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    
    <link rel="preload" href="/vuepress-blog/assets/css/0.styles.9c2c2685.css" as="style"><link rel="preload" href="/vuepress-blog/assets/js/app.978b4b90.js" as="script"><link rel="preload" href="/vuepress-blog/assets/js/layout-Layout.210bf3ea.js" as="script"><link rel="preload" href="/vuepress-blog/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound.d08842b8.js" as="script"><link rel="preload" href="/vuepress-blog/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound~layout-Slide.2cdb5d8c.js" as="script"><link rel="preload" href="/vuepress-blog/assets/js/vendors~layout-Blog~layout-Layout.e95ed9ce.js" as="script"><link rel="preload" href="/vuepress-blog/assets/js/page-跑马灯动画.da1169c9.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/js/286.6c03c071.js"><link rel="prefetch" href="/vuepress-blog/assets/js/287.d6a6ee0c.js"><link rel="prefetch" href="/vuepress-blog/assets/js/288.175e56e6.js"><link rel="prefetch" href="/vuepress-blog/assets/js/289.7c4f0f53.js"><link rel="prefetch" href="/vuepress-blog/assets/js/290.bb23584c.js"><link rel="prefetch" href="/vuepress-blog/assets/js/291.e3a0ff90.js"><link rel="prefetch" href="/vuepress-blog/assets/js/292.ff5a0290.js"><link rel="prefetch" href="/vuepress-blog/assets/js/293.3a59db2c.js"><link rel="prefetch" href="/vuepress-blog/assets/js/294.1a46c982.js"><link rel="prefetch" href="/vuepress-blog/assets/js/295.22c5a9db.js"><link rel="prefetch" href="/vuepress-blog/assets/js/296.784f76d2.js"><link rel="prefetch" href="/vuepress-blog/assets/js/297.96598694.js"><link rel="prefetch" href="/vuepress-blog/assets/js/298.74305866.js"><link rel="prefetch" href="/vuepress-blog/assets/js/299.a5c26ce1.js"><link rel="prefetch" href="/vuepress-blog/assets/js/300.9b44c082.js"><link rel="prefetch" href="/vuepress-blog/assets/js/301.d7e2805d.js"><link rel="prefetch" href="/vuepress-blog/assets/js/302.c18bcbff.js"><link rel="prefetch" href="/vuepress-blog/assets/js/303.df689536.js"><link rel="prefetch" href="/vuepress-blog/assets/js/304.09b3ccd5.js"><link rel="prefetch" href="/vuepress-blog/assets/js/305.91992673.js"><link rel="prefetch" href="/vuepress-blog/assets/js/306.8f813043.js"><link rel="prefetch" href="/vuepress-blog/assets/js/307.6d4aad0f.js"><link rel="prefetch" href="/vuepress-blog/assets/js/308.28e78bcc.js"><link rel="prefetch" href="/vuepress-blog/assets/js/309.69ee806d.js"><link rel="prefetch" href="/vuepress-blog/assets/js/310.6d018a0f.js"><link rel="prefetch" href="/vuepress-blog/assets/js/311.0ca81400.js"><link rel="prefetch" href="/vuepress-blog/assets/js/312.1ec04dd3.js"><link rel="prefetch" href="/vuepress-blog/assets/js/313.8c8102f6.js"><link rel="prefetch" href="/vuepress-blog/assets/js/314.31e0e49c.js"><link rel="prefetch" href="/vuepress-blog/assets/js/315.5989994f.js"><link rel="prefetch" href="/vuepress-blog/assets/js/316.cd857a8f.js"><link rel="prefetch" href="/vuepress-blog/assets/js/317.03f34a89.js"><link rel="prefetch" href="/vuepress-blog/assets/js/318.db2366c7.js"><link rel="prefetch" href="/vuepress-blog/assets/js/319.57bea890.js"><link rel="prefetch" href="/vuepress-blog/assets/js/layout-Blog.bb3f98bf.js"><link rel="prefetch" href="/vuepress-blog/assets/js/layout-NotFound.7787c117.js"><link rel="prefetch" href="/vuepress-blog/assets/js/layout-Slide.0dd4b72e.js"><link rel="prefetch" href="/vuepress-blog/assets/js/mermaid.3c57c0d7.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page--093d8aac.32a071cc.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page--170dac22.802e2ce1.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page--2132c229.d88d0acc.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page--2449b2e6.5bd012ec.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page--2a865898.c7484d74.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page--344860a8.de159ca2.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page--356d3bdc.78690bb9.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page--392f9e3a.3aaa7131.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page--3943bf18.b77dd20f.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page--3ef11e7e.cff04f28.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page--3fe0d74a.9bd90187.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page--3feda75e.c6455436.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page--43448b9f.2cebe91c.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page--471c5114.a3fb5d50.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page--526adde0.02713407.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page--619b0b4b.452bc441.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page--64686281.88faefc6.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page--65fedeb4.156784c3.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page--6fa4a2ac.a6b4377d.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page--75c33144.7736a651.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page--cb665f30.93b09cca.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page--d302a9f6.8b54666c.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page--d6c1ccd4.c6797082.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page--d7dc7840.9476764d.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page--dc82af9c.759924a4.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-1~n整数中1出现的次数.c8f7471b.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-AVL树.33e5c336.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-CSS介绍.a940b5ef.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-DDL.589e16da.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-DFT变换的性质.38042b17.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-DML.48d91655.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-DQL.9b116037.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-DTFT.a4fabea0.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-ES6.70417dd1.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-FFT及其框图实现.ffadae42.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-HTML.67f4d0e5.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-HTML简介.7513b32a.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-Home.1a2d3c4d.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-JDBC.21a74eb5.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-Java8新特性.3831c06e.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-JavaEE.2df7edaa.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-JavaSE.75c612cc.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-JavaScript.a767ebc6.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-JavaScript中的冒泡与捕获.d07b8653.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-JavaScript中的类.fe300227.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-JavaScript的作用域.0e582edb.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-Java反射.69bde386.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-Java基础知识介绍.87b6694c.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-Java多线程.04679428.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-Java常用API.d11260cf.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-Java开发环境搭建.662924be.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-Java异常.5d162f19.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-Java文件操作.69e21e36.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-Java注解.97036c29.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-Java网络编程.05cd7e64.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-Java集合与泛型.56360266.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-Java面向对象.00cab677.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-MyBatis学习入门.dfba3077.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-MySQL.9f5f4659.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-MySQL基本概念.97ebf447.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-Node.8740f55f.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-Nodejs之Buffer.212c7124.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-Nodejs之EventEmitter.3c813710.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-Nodejs之Express入门.3fb4650d.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-Nodejs之HTTP.6cb9e747.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-Nodejs之Koa.25aef586.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-Nodejs之MongoDB.362272df.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-Nodejs之Stream.3b051c9d.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-Nodejs之事件循环.29a40ed5.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-Nodejs之操作系统.f55fc50e.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-Nodejs之文件系统.d45c9810.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-Nodejs之模块系统.1c56c3c7.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-Nodejs之路径.51fc8069.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-Pow(x,n).b46e3fa2.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-Promise与异步编程.f321afbb.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-Promise的使用.4771ded4.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-Proxy和Reflect.27005d44.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-SSM整合.f6554a52.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-Set集合与Map集合.ab726478.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-SpringBoot入门.3d1fa867.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-SpringMVC入门.523d896d.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-Spring入门.9f5dbc53.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-Spring常见注解.f228f514.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-Symbol和Symbol属性.f47f7cad.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-Trie.392cae93.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-TypeScript.8043c2fd.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-VueRouter.8e1efcd6.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-Vuejs入门.d67529a7.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-Vuex.f76a8524.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-Vue带来的开发思维的改变.c170b3b2.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-Vue目录.a1be6b67.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-Z变换.55e04768.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-Z变换解差分方程的思考.0c1e2f01.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-border.8a80f5ac.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-display.8e901e83.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-div和span.990f44fc.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-let和const.e6245893.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-margin.2b713606.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-n个骰子的点数.2b44dfd2.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-padding.6ae42e59.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-vue-cli的使用.1637803c.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-x的平方根.d9b8b2b3.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-三大范式.a2d13469.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-三数之和.d2666cae.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-不同路径.bcac999d.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-丑数.f8a0a0ca.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-两个链表的第一个公共节点.e0d98077.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-两数之和.3a9c0aeb.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-二分搜索树.c2b9b794.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-二叉搜索树与双向链表.668f3a4c.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-二叉搜索树的后序遍历序列.e95bcd79.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-二叉树中和为某一值的路径.28487185.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-二叉树的下一个节点.d11ece94.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-二叉树的深度.f8cb32c0.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-二叉树的第k大节点.a9d364b8.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-二叉树的镜像.e91c60fd.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-二维数组中的查找.dbc7b76a.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-二进制中1的个数.ce69c7c1.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-介绍.c2be0464.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-从DFS到DFT.7093fac8.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-从上到下打印二叉树.66546c3e.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-从尾到头打印链表.217785c7.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-优先队列和堆.df553cc8.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-伪类选择器.72835c56.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-使用GithubActions部署VuePress博客.2e9c89eb.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-信号的相关.416f0576.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-入门使用.44b0266d.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-全排列.17de80e8.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-准备工作.edb9cfde.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-函数.43a798bb.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-列表.d5da18c5.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-初识Vue.e10ec51f.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-删除排序链表中的重复元素II.161330e4.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-删除有序数组中的重复项.b8cd9231.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-删除链表的节点.8eb3999a.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-刷题.e30d8b59.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-剪绳子.b103a0cc.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-动态数组.def41e26.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-动画.bd2feb6d.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-包含min函数的栈.fd8e4b08.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-匹配问题.0f252c86.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-单例模式.334a8114.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-单词搜索.4d0ec4b6.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-反转链表.a4fd53a1.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-合并K个升序链表.a27ad867.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-合并两个排序的链表.f510d0c4.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-合并区间.1a182c0c.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-同源策略.7e4c3bec.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-和为s的数字.61aaf9e8.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-哈密尔顿回路.95a700ce.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-哈希表.9d50fa73.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-回溯法.5b9a6b64.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-图片.d86e7ca9.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-图的广度优先遍历.127fa0b4.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-图的深度优先遍历.4870c9d3.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-图的表示.f153a3fc.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-图论.5a3c12fd.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-图论建模.00ba05e4.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-圆周卷积.8e9be9fc.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-圆圈中最后剩下的数字.d8afbeca.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-在排序数组中查找数字.b7b7bf28.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-在浏览器中调试CSS.3765cf23.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-基本类型.5d5b6f75.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-基本选择器.d9276f9d.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-堆排序.c8cdaa16.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-声明合并.c4268c75.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-复杂链表的复制.d6687577.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-外观数列.441d04a9.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-多表查询.7d1f9f2f.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-子集.aa42cc21.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-字体属性.6fe94739.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-字母异位词分组.14175ece.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-字符串和正则表达式.cf3194d4.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-字符串的排列.c79c12c6.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-小球会停下来吗.f589412b.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-层叠与优先级.9f18ccf1.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-希尔排序.524c26a2.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-并查集.0a513283.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-序列化二叉树.77140d5f.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-归并排序.905ab359.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-快速排序.c6352476.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-扑克牌中的顺子.edefa67c.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-打印从1到最大的n位数.2d2f0da7.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-扩展对象的功能性.ecd196da.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-把数字翻译成字符串.a4a98633.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-把数组排成最小的数.dbb65179.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-接口.645b8290.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-控制对象的访问.a7acc0f1.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-插入排序.30fa7be1.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-插槽.c219fba6.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-搜索旋转排序数组II.6e8a5583.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-改进的数组功能.45745fba.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-数值的整数次方.e2b2b250.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-数字序列中某一位的数字.4a58bf13.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-数据流中的中位数.56862b56.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-数据结构.58e24a06.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-数组中出现次数超过一半的数字.b9b702c6.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-数组中数字出现的次数.8ae5e6cc.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-数组中的逆序对.c1f93239.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-数组中的重复的数字.021385c4.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-文本标签.7af12981.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-斐波那契数列.140f404f.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-方程与框图的转换.5e2437ba.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-旋转数组的最小数字.5c7bc7d7.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-旋转链表.08b1c7ba.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-最大子序和.097115b5.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-最大子数组和以及最长子字符串.eedfd02a.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-最小生成树.8e01ec4e.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-最小的k个数.09ef0f20.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-最小路径和.d7e0e4b7.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-最短路径算法.812b4d80.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-最长回文字符串.8f8fd127.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-有向图算法.0269e2f9.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-有限长序列的分类.4c9c5162.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-权限管理.9b7c1656.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-柯里化介绍.ffb983af.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-栈.328d8cc4.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-栈的压入弹出序列.c94e102f.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-树的子结构.743348b7.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-桥和割点.9a01b945.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-模板语法.aea781cb.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-欧拉回路.27eec08a.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-正则表达式的匹配.61e4a2f6.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-泛型.eaf5f367.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-生命周期.ed32d128.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-用DFT计算线性卷积.796fac3a.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-用两个栈实现队列.5f60f638.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-用模块封装代码.809f38f3.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-盒子模型.27b1da3a.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-盛水最多的容器.d35c0604.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-礼物的最大价值.238d0c7e.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-第一个只出现一次的字符.d59f8d55.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-简化路径.3c048a3f.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-算法.b37d8a23.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-类.614d7642.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-类型断言.8bb25778.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-红黑树.157debf3.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-约束.df20bf92.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-线段树.3f6939ef.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-组件.f9973117.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-组合.8690dde6.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-组合总数.f7698887.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-组合选择器.1ed3750f.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-网络流与最大流.feaa6a66.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-罗马数字与数字的转换.8fc4ab46.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-翻转字符串.4fe72a48.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-股票的最大利润.fd3dde70.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-表单(一).b0d1a1a6.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-表单(二).0111dd95.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-表格.851aaa35.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-表示数值的字符串.b1d05232.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-解构.cf1279c2.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-解码方法.0b522d86.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-计算属性与监听器.3353b769.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-访问对象的属性.a3cb76c9.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-语义化标签.b3be6c19.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-调整数组顺序使奇数位于偶数之前.e78594a2.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-超链接.cc58692d.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-跳跃游戏.94efeb99.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-远程访问jupyter.9329b527.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-连续时间信号的抽样及其重建.f558d398.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-迭代器与生成器.5becf813.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-选择排序.48ed7e95.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-重建二叉树.c48b02f4.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-链表.47843d8f.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-链表中倒数第k个节点.5e739a28.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-链表中环的入口节点.f24a26b4.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-队列.03bf6424.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-队列的最大值.9f02c654.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-防抖与节流.a1ce94c3.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-顺时针打印矩阵.68a690b1.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-高级类型.79e679b1.js"><link rel="prefetch" href="/vuepress-blog/assets/js/vendors~flowchart.7afea6ec.js"><link rel="prefetch" href="/vuepress-blog/assets/js/vendors~mermaid.3021d5ac.js"><link rel="prefetch" href="/vuepress-blog/assets/js/vendors~photo-swipe.3439bd58.js">
    <link rel="stylesheet" href="/vuepress-blog/assets/css/0.styles.9c2c2685.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container has-navbar has-sidebar has-anchor"><header class="navbar"><button class="sidebar-button"><span class="icon"></span></button> <a href="/vuepress-blog/" class="home-link router-link-active"><!----> <!----> <span class="site-name can-hide">Coder</span></a> <div class="links"><button class="color-button"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="skin-icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4
        38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32
        51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0
        102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2
        6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4
        0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2
        9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224
        419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4
        470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0
        22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6
        12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128
        505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2
        16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8
        86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4
        80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6
        6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg> <div class="color-picker-menu" style="display:none;"><div class="theme-options"><ul class="themecolor-select"><label for="themecolor-select">Theme Color:</label> <li><a href="#" class="default-theme"></a></li> </ul> <div class="darkmode-toggle"><label for="darkmode-toggle" class="desc">Theme Mode:</label> <div class="darkmode-switch"><div class="item day"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon light-icon"><path d="M512 256a42.667 42.667 0 0 0 42.667-42.667V128a42.667 42.667 0 0 0-85.334 0v85.333A42.667 42.667 0 0 0 512 256zm384 213.333h-85.333a42.667 42.667 0 0 0 0 85.334H896a42.667 42.667 0 0 0 0-85.334zM256 512a42.667 42.667 0 0 0-42.667-42.667H128a42.667 42.667 0 0 0 0 85.334h85.333A42.667 42.667 0 0 0 256 512zm9.387-298.667a42.667 42.667 0 0 0-59.307 62.72l61.44 59.307a42.667 42.667 0 0 0 31.147 11.947 42.667 42.667 0 0 0 30.72-13.227 42.667 42.667 0 0 0 0-60.16zm459.946 133.974a42.667 42.667 0 0 0 29.44-11.947l61.44-59.307a42.667 42.667 0 0 0-57.6-62.72l-61.44 60.587a42.667 42.667 0 0 0 0 60.16 42.667 42.667 0 0 0 28.16 13.227zM512 768a42.667 42.667 0 0 0-42.667 42.667V896a42.667 42.667 0 0 0 85.334 0v-85.333A42.667 42.667 0 0 0 512 768zm244.48-79.36a42.667 42.667 0 0 0-59.307 61.44l61.44 60.587a42.667 42.667 0 0 0 29.44 11.946 42.667 42.667 0 0 0 30.72-12.8 42.667 42.667 0 0 0 0-60.586zm-488.96 0-61.44 59.307a42.667 42.667 0 0 0 0 60.586 42.667 42.667 0 0 0 30.72 12.8 42.667 42.667 0 0 0 28.587-10.666l61.44-59.307a42.667 42.667 0 0 0-59.307-61.44zM512 341.333A170.667 170.667 0 1 0 682.667 512 170.667 170.667 0 0 0 512 341.333z" fill="currentColor"></path></svg></div> <div class="item auto active"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon auto-icon"><path d="M460.864 539.072H564.8L510.592 376l-49.728 163.072zM872 362.368V149.504H659.648L510.528 0l-149.12 149.504H149.12v212.928L0 511.872l149.12 149.504v212.928h212.352l149.12 149.504 149.12-149.504h212.352V661.376l149.12-149.504L872 362.368zM614.464 693.12l-31.616-90.624H438.272l-31.616 90.624h-85.888l144.576-407.68h90.368l144.576 407.68h-85.824zm0 0" fill="currentColor"></path></svg></div> <div class="item night"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon dark-icon"><path d="M935.539 630.402c-11.43-11.432-28.674-14.739-43.531-8.354-46.734 20.103-96.363 30.297-147.508 30.297-99.59 0-193.221-38.784-263.64-109.203-108.637-108.637-139.61-270.022-78.908-411.148a39.497 39.497 0 0 0-51.886-51.887c-52.637 22.64-100.017 54.81-140.826 95.616-85.346 85.346-132.346 198.821-132.346 319.52 0 120.7 47.001 234.172 132.347 319.519S408.063 947.11 528.76 947.11c120.7 0 234.172-47.003 319.52-132.351 40.809-40.81 72.978-88.19 95.616-140.826a39.497 39.497 0 0 0-8.356-43.532z" fill="currentColor"></path></svg></div></div> <!----></div></div></div></button> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/vuepress-blog/" class="nav-link router-link-active"><i class="iconfont icon-home"></i>
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据结构与算法" class="dropdown-title"><span class="title"><i class="iconfont icon-alo"></i>
        数据结构与算法
      </span> <span class="arrow down"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/vuepress-blog/数据结构/" class="nav-link"><i class="iconfont icon-data-structure"></i>
  数据结构
</a></li><li class="dropdown-item"><a href="/vuepress-blog/算法/" class="nav-link"><i class="iconfont icon-alo"></i>
  算法
</a></li><li class="dropdown-item"><a href="/vuepress-blog/刷题/" class="nav-link"><i class="iconfont icon-offer"></i>
  刷题
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="大前端" class="dropdown-title"><span class="title"><i class="iconfont icon-front-end"></i>
        大前端
      </span> <span class="arrow down"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/vuepress-blog/HTML/" class="nav-link"><i class="iconfont icon-html"></i>
  HTML
</a></li><li class="dropdown-item"><a href="/vuepress-blog/CSS/" class="nav-link"><i class="iconfont icon-css"></i>
  CSS
</a></li><li class="dropdown-item"><a href="/vuepress-blog/JavaScript/" class="nav-link"><i class="iconfont icon-Bomb"></i>
  JavaScript
</a></li><li class="dropdown-item"><a href="/vuepress-blog/TypeScript/" class="nav-link"><i class="iconfont icon-book"></i>
  TypeScript
</a></li><li class="dropdown-item"><a href="/vuepress-blog/ES6/" class="nav-link"><i class="iconfont icon-ES6"></i>
  ES6
</a></li><li class="dropdown-item"><a href="/vuepress-blog/Node/" class="nav-link"><i class="iconfont icon-Node"></i>
  Node
</a></li><li class="dropdown-item"><a href="/vuepress-blog/Webpack/" class="nav-link"><i class="iconfont icon-webpack"></i>
  Webpack
</a></li><li class="dropdown-item"><a href="/vuepress-blog/Vue/" class="nav-link"><i class="iconfont icon-Vue"></i>
  Vue
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><span class="title"><i class="iconfont icon-Java"></i>
        Java
      </span> <span class="arrow down"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/vuepress-blog/Java/JavaSE/" class="nav-link"><i class="iconfont icon-JavaSE"></i>
  JavaSE
</a></li><li class="dropdown-item"><a href="/vuepress-blog/Java/JavaEE/" class="nav-link"><i class="iconfont icon-Spring"></i>
  JavaEE
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><span class="title"><i class="iconfont icon-shujuku"></i>
        数据库
      </span> <span class="arrow down"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/vuepress-blog/数据库/MySQL/" class="nav-link"><i class="iconfont icon-mysql"></i>
  MySQL
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="信号处理" class="dropdown-title"><span class="title"><i class="iconfont icon-signal"></i>
        信号处理
      </span> <span class="arrow down"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/vuepress-blog/信号处理/数字信号处理/" class="nav-link"><i class="iconfont icon-matching"></i>
  数字信号处理
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="收藏" class="dropdown-title"><span class="title"><i class="iconfont icon-shoucang"></i>
        收藏
      </span> <span class="arrow down"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/vuepress-blog/收藏/文章.html" class="nav-link"><i class="iconfont icon-wenzhang"></i>
  文章
</a></li><li class="dropdown-item"><a href="/vuepress-blog/收藏/网站.html" class="nav-link"><i class="iconfont icon-website"></i>
  网站
</a></li><li class="dropdown-item"><a href="/vuepress-blog/收藏/视频.html" class="nav-link"><i class="iconfont icon-shipin"></i>
  视频
</a></li><li class="dropdown-item"><a href="/vuepress-blog/收藏/公众号.html" class="nav-link"><i class="iconfont icon-gongzhonghao"></i>
  公众号
</a></li><li class="dropdown-item"><a href="/vuepress-blog/收藏/书.html" class="nav-link"><i class="iconfont icon-shu"></i>
  书
</a></li><li class="dropdown-item"><a href="/vuepress-blog/收藏/电影.html" class="nav-link"><i class="iconfont icon-dianying"></i>
  电影
</a></li></ul></div></div><div class="nav-item"><a href="/vuepress-blog/随笔/" class="nav-link"><i class="iconfont icon-suibi"></i>
  随笔
</a></div></nav> <!----> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <nav class="sidebar-nav-links"><div class="nav-item"><a href="/vuepress-blog/" class="nav-link router-link-active"><i class="iconfont icon-home"></i>
  主页
</a></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="数据结构与算法" class="dropdown-title"><span class="title"><i class="iconfont icon-alo"></i>
      数据结构与算法
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress-blog/数据结构/" class="nav-link"><i class="iconfont icon-data-structure"></i>
  数据结构
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/算法/" class="nav-link"><i class="iconfont icon-alo"></i>
  算法
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/刷题/" class="nav-link"><i class="iconfont icon-offer"></i>
  刷题
</a></li></ul></div></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="大前端" class="dropdown-title"><span class="title"><i class="iconfont icon-front-end"></i>
      大前端
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress-blog/HTML/" class="nav-link"><i class="iconfont icon-html"></i>
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/CSS/" class="nav-link"><i class="iconfont icon-css"></i>
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/JavaScript/" class="nav-link"><i class="iconfont icon-Bomb"></i>
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/TypeScript/" class="nav-link"><i class="iconfont icon-book"></i>
  TypeScript
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/ES6/" class="nav-link"><i class="iconfont icon-ES6"></i>
  ES6
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/Node/" class="nav-link"><i class="iconfont icon-Node"></i>
  Node
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/Webpack/" class="nav-link"><i class="iconfont icon-webpack"></i>
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/Vue/" class="nav-link"><i class="iconfont icon-Vue"></i>
  Vue
</a></li></ul></div></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><span class="title"><i class="iconfont icon-Java"></i>
      Java
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress-blog/Java/JavaSE/" class="nav-link"><i class="iconfont icon-JavaSE"></i>
  JavaSE
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/Java/JavaEE/" class="nav-link"><i class="iconfont icon-Spring"></i>
  JavaEE
</a></li></ul></div></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><span class="title"><i class="iconfont icon-shujuku"></i>
      数据库
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress-blog/数据库/MySQL/" class="nav-link"><i class="iconfont icon-mysql"></i>
  MySQL
</a></li></ul></div></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="信号处理" class="dropdown-title"><span class="title"><i class="iconfont icon-signal"></i>
      信号处理
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress-blog/信号处理/数字信号处理/" class="nav-link"><i class="iconfont icon-matching"></i>
  数字信号处理
</a></li></ul></div></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="收藏" class="dropdown-title"><span class="title"><i class="iconfont icon-shoucang"></i>
      收藏
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress-blog/收藏/文章.html" class="nav-link"><i class="iconfont icon-wenzhang"></i>
  文章
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/收藏/网站.html" class="nav-link"><i class="iconfont icon-website"></i>
  网站
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/收藏/视频.html" class="nav-link"><i class="iconfont icon-shipin"></i>
  视频
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/收藏/公众号.html" class="nav-link"><i class="iconfont icon-gongzhonghao"></i>
  公众号
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/收藏/书.html" class="nav-link"><i class="iconfont icon-shu"></i>
  书
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/收藏/电影.html" class="nav-link"><i class="iconfont icon-dianying"></i>
  电影
</a></li></ul></div></div><div class="nav-item"><a href="/vuepress-blog/随笔/" class="nav-link"><i class="iconfont icon-suibi"></i>
  随笔
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><!----> <span class="title">思考</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vuepress-blog/%E9%9A%8F%E7%AC%94/%E5%B0%8F%E7%90%83%E4%BC%9A%E5%81%9C%E4%B8%8B%E6%9D%A5%E5%90%97/" class="sidebar-link">小球会停下来吗</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><!----> <span class="title">技术</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vuepress-blog/%E9%9A%8F%E7%AC%94/%E4%BD%BF%E7%94%A8%20Github%20Actions%20%E9%83%A8%E7%BD%B2%20VuePress%20%E5%8D%9A%E5%AE%A2/" class="sidebar-link">使用 Github Actions 部署 VuePress 博客</a></li><li><a href="/vuepress-blog/%E9%9A%8F%E7%AC%94/%E8%BF%9C%E7%A8%8B%E8%AE%BF%E9%97%AE%20jupyter/" class="sidebar-link">远程访问 jupyter</a></li><li><a href="/vuepress-blog/%E9%9A%8F%E7%AC%94/%E8%B7%91%E9%A9%AC%E7%81%AF%E5%8A%A8%E7%94%BB/" aria-current="page" class="active sidebar-link">跑马灯动画</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuepress-blog/%E9%9A%8F%E7%AC%94/%E8%B7%91%E9%A9%AC%E7%81%AF%E5%8A%A8%E7%94%BB/#动画的无缝衔接" class="sidebar-link">动画的无缝衔接</a></li><li class="sidebar-sub-header"><a href="/vuepress-blog/%E9%9A%8F%E7%AC%94/%E8%B7%91%E9%A9%AC%E7%81%AF%E5%8A%A8%E7%94%BB/#动画动态加减速" class="sidebar-link">动画动态加减速</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuepress-blog/%E9%9A%8F%E7%AC%94/%E8%B7%91%E9%A9%AC%E7%81%AF%E5%8A%A8%E7%94%BB/#改变动画的持续时间" class="sidebar-link heading3">改变动画的持续时间</a></li><li class="sidebar-sub-header"><a href="/vuepress-blog/%E9%9A%8F%E7%AC%94/%E8%B7%91%E9%A9%AC%E7%81%AF%E5%8A%A8%E7%94%BB/#创建多个新动画" class="sidebar-link heading3">创建多个新动画</a></li></ul></li><li class="sidebar-sub-header"><a href="/vuepress-blog/%E9%9A%8F%E7%AC%94/%E8%B7%91%E9%A9%AC%E7%81%AF%E5%8A%A8%E7%94%BB/#总结" class="sidebar-link">总结</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"><nav class="breadcrumb"><ol vocab="https://schema.org/" typeof="BreadcrumbList"><li property="itemListElement" typeof="ListItem"><a href="/vuepress-blog/%E9%9A%8F%E7%AC%94/" property="item" typeof="WebPage" class="router-link-active"><!----> <span property="name"></span></a> <meta property="position" content="1"></li><li property="itemListElement" typeof="ListItem" class="is-active"><a href="/vuepress-blog/%E9%9A%8F%E7%AC%94/%E8%B7%91%E9%A9%AC%E7%81%AF%E5%8A%A8%E7%94%BB/" aria-current="page" property="item" typeof="WebPage" class="router-link-exact-active router-link-active"><!----> <span property="name">跑马灯动画</span></a> <meta property="position" content="2"></li></ol></nav>  <div vocab="https://schema.org/" typeof="Article" class="page-title"><h1><!----> <span property="headline">跑马灯动画</span></h1> <div class="page-info"><!----> <span aria-label="Author🖊" data-balloon-pos="down"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon author-icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z" fill="currentColor"></path></svg> <span property="author">熊滔</span></span><!----><span aria-label="Writing Date📅" data-balloon-pos="down" class="time-info"><svg viewBox="0 0 1030 1024" xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 0 1-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 0 1-33.473-33.473V143.657H180.6A134.314 134.314 0 0 0 46.66 277.595v535.756A134.314 134.314 0 0 0 180.6 947.289h669.74a134.36 134.36 0 0 0 133.94-133.938V277.595a134.314 134.314 0 0 0-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 0 1-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 0 1-33.472 33.473z" fill="currentColor"></path></svg> <span property="datePublished">2021-07-02 </span></span><!----><!----><span aria-label="Reading Time⌛" data-balloon-pos="down" class="reading-time-info"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon timer-icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z" fill="currentColor"></path></svg> <span>About 15 min</span> <meta property="timeRequired" content="PT15M"></span></div> <!----> <hr></div> <div class="anchor-place-holder"><aside id="anchor"><div class="anchor-wrapper"><ul class="anchor-list"><li class="anchor"><a href="/vuepress-blog/%E9%9A%8F%E7%AC%94/%E8%B7%91%E9%A9%AC%E7%81%AF%E5%8A%A8%E7%94%BB/#动画的无缝衔接" class="anchor-link heading2"><div>动画的无缝衔接</div></a></li><li class="anchor"><a href="/vuepress-blog/%E9%9A%8F%E7%AC%94/%E8%B7%91%E9%A9%AC%E7%81%AF%E5%8A%A8%E7%94%BB/#动画动态加减速" class="anchor-link heading2"><div>动画动态加减速</div></a></li><li class="anchor"><a href="/vuepress-blog/%E9%9A%8F%E7%AC%94/%E8%B7%91%E9%A9%AC%E7%81%AF%E5%8A%A8%E7%94%BB/#改变动画的持续时间" class="anchor-link heading3"><div>改变动画的持续时间</div></a></li><li class="anchor"><a href="/vuepress-blog/%E9%9A%8F%E7%AC%94/%E8%B7%91%E9%A9%AC%E7%81%AF%E5%8A%A8%E7%94%BB/#创建多个新动画" class="anchor-link heading3"><div>创建多个新动画</div></a></li><li class="anchor"><a href="/vuepress-blog/%E9%9A%8F%E7%AC%94/%E8%B7%91%E9%A9%AC%E7%81%AF%E5%8A%A8%E7%94%BB/#总结" class="anchor-link heading2"><div>总结</div></a></li></ul></div></aside></div> <div class="theme-default-content content__default"><p>本篇文章介绍一种跑马灯动画，如下</p> <img src="http://blog-hostimaging.oss-cn-beijing.aliyuncs.com/1625150270025.gif" style="zoom:50%;"> <p>上面的动画主要实现了两个功能：</p> <ul><li>文字的无缝衔接</li> <li>动画的动态加减速</li></ul> <p>首先给出例子用到的 <code>html</code> 与 <code>css</code> 代码</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>IE=edge<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>index.css<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>nowrap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>txt<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>朝辞白帝彩云间，千里江陵一日还。两岸猿声啼不住，轻舟已过万重山。<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>speedUp<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>加速<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>slowDown<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>减速<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>module<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
        <span class="token keyword">import</span> <span class="token string">'./index.js'</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">*</span> <span class="token punctuation">{</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">box-sizing</span><span class="token punctuation">:</span> border-box<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.container</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 500px<span class="token punctuation">;</span>
    <span class="token property">margin</span><span class="token punctuation">:</span> 100px auto<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.nowrap</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">white-space</span><span class="token punctuation">:</span> nowrap<span class="token punctuation">;</span>
    <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>制作动画的手段有很多种，使用 <code>JavaScript</code> 以及 <code>CSS</code> 均可实现，不过 <code>CSS</code> 的性能较好，所以本文使用 <code>CSS</code> 来实现动画。</p> <h2 id="动画的无缝衔接"><a href="#动画的无缝衔接" class="header-anchor">#</a> 动画的无缝衔接</h2> <p>一开始我都不明白什么叫动画的无缝衔接，后来我看到了不是无缝衔接的例子瞬间就明白了，如下</p> <img src="http://blog-hostimaging.oss-cn-beijing.aliyuncs.com/1625150660387.gif" style="zoom:50%;"> <p>可以观察到第一次动画完毕以后非常突兀的来到了文字的开头，与上面无缝衔接的动画想比，可以感觉到无缝衔接动画非常的流畅，所以如何实现动画的无缝衔接呢? 答案就是将内容复制两份，这样当文字滚动在最后时出现的就不是空白，而是开头的文字。</p> <p>因为我们使用的是 <code>transform: translateX()</code> 来制作动画，所以我们要获取复制前文本的长度，以确定最终变换的距离，以及为了实现动画的速度与文本的长短无关，那么动画运动的总时间是与文本的长度成正比的，这个比例系数自然就是速度了 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mo>=</mo><mi>v</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">s = vt</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.61508em;"></span><span class="strut bottom" style="height:0.61508em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">s</span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.03588em;">v</span><span class="mord mathit">t</span></span></span></span>。上面这一切都表明我们的动画的创建是与文本长度有关的，而文本的长度我们事前不知道，所以动画的创建也是动态的，我们通过向 <code>DOM</code> 插入一个 <code>style</code> 标签来动态创建动画。</p> <p>创建动画相关的代码如下</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 动画的速度，实际测试大约为 1s 两个字</span>
<span class="token keyword">let</span> speed <span class="token operator">=</span> <span class="token number">36</span>

<span class="token comment">// 动态插入 keyframe</span>
<span class="token keyword">const</span> style <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'style'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">'head'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>style<span class="token punctuation">)</span>

<span class="token keyword">const</span> <span class="token function-variable function">createKeyFrame</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">width<span class="token punctuation">,</span> name</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> keyframe <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
        @keyframes </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> {
            0% {
                transform: translateX(0px);
            }
            100% {
                transform: translateX(-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>width<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px);
            }
        }
        .</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> {
            animation: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>width<span class="token punctuation">)</span><span class="token operator">/</span>speed<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">s linear infinite;
        }
    </span><span class="token template-punctuation string">`</span></span>
    style<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> keyframe
<span class="token punctuation">}</span>
</code></pre></div><p>上面 <code>createKeyFrame</code> 函数用以动态创建一个动画，该函数接收两个参数 <code>width</code> 表示文本的长度以及 <code>name</code> 表示动画的名称，除了创建一个动画，我们还创建一个名字与动画名相同的类，我们只要为元素添加这个类，这个类便会拥有这个动画，动画的执行次数为无限次。</p> <p>准备好这些以后，我们便可以开始为文本应用动画了，在应用动画之前，我们首先需要获得文本的长度，然后将文本复制一遍插入到原文本后面，如下</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 包含文字的元素</span>
<span class="token keyword">const</span> txt <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByClassName</span><span class="token punctuation">(</span><span class="token string">'txt'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
<span class="token comment">// 文本的长度</span>
<span class="token keyword">let</span> textWidth <span class="token operator">=</span> <span class="token number">0</span>
<span class="token keyword">const</span> <span class="token function-variable function">initAnimation</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 获得文本长度，控制动画时间，以及 transform 的距离</span>
    textWidth <span class="token operator">=</span> txt<span class="token punctuation">.</span>scrollWidth

    <span class="token comment">// 如果宽度足够显示所有的文字，则没有必要使用动画</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>textWidth <span class="token operator">&lt;=</span> <span class="token number">500</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 不仅不添加动画，而且要移除之前添加的动画</span>
        txt<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">'slow'</span><span class="token punctuation">,</span> <span class="token string">'temp-slow'</span><span class="token punctuation">,</span> <span class="token string">'fast'</span><span class="token punctuation">,</span> <span class="token string">'temp-fast'</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 获得文本内容</span>
    <span class="token keyword">const</span> textContent <span class="token operator">=</span> txt<span class="token punctuation">.</span>textContent
    <span class="token comment">// 在后面设置添加相同的文字，做到动画的无缝衔接</span>
    txt<span class="token punctuation">.</span>textContent <span class="token operator">=</span> textContent <span class="token operator">+</span> textContent
    
    <span class="token comment">// 动态制作动画</span>
    <span class="token function">createKeyFrame</span><span class="token punctuation">(</span>textWidth<span class="token punctuation">,</span> <span class="token string">'slow'</span><span class="token punctuation">)</span>
    <span class="token comment">// 应用动画</span>
    txt<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'slow'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">initAnimation</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>上面的程序首先获得文本的长度，这里有一个小细节，如果文本的长度小于容器的长度的话，那么就没必要使用动画，在这里我们移除了一些类，这些类后面会用到，这里只要理解这个行为是移除所有动画即可。如果文本的长度大于容器的长度，我们接下来就来取得文本的内容，然后复制一份并且添加原文本的后面，接着添加动画，并且为元素应用动画，此时效果看起来是这样</p> <img src="http://blog-hostimaging.oss-cn-beijing.aliyuncs.com/1625152644530.gif" style="zoom:50%;"> <p>此时我们已经实现了动画的无缝衔接，但是加减速功能还没有实现。</p> <h2 id="动画动态加减速"><a href="#动画动态加减速" class="header-anchor">#</a> 动画动态加减速</h2> <h3 id="改变动画的持续时间"><a href="#改变动画的持续时间" class="header-anchor">#</a> 改变动画的持续时间</h3> <p>那么如何实现动画的动态加减速呢，首先自然而然的一个想法就是直接改变动画的总时间，我们先以加速为例</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 是否处于加速状态</span>
<span class="token keyword">let</span> speeded <span class="token operator">=</span> <span class="token boolean">false</span>

<span class="token keyword">const</span> upBtn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'speedUp'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token function-variable function">speedUp</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 如果已经处于加速状态，则直接返回</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>speeded<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 设置为加速状态</span>
    speeded <span class="token operator">=</span> <span class="token boolean">true</span>

    <span class="token comment">// 速度变为原来四倍</span>
    speed <span class="token operator">=</span> speed <span class="token operator">*</span> <span class="token number">4</span>
    <span class="token comment">// 改变动画的运行时间</span>
    txt<span class="token punctuation">.</span>style<span class="token punctuation">.</span>animationDuration <span class="token operator">=</span> textWidth <span class="token operator">/</span> speed <span class="token operator">+</span> <span class="token string">'s'</span>
<span class="token punctuation">}</span>
upBtn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> speedUp<span class="token punctuation">)</span>
</code></pre></div><p>我们为加速按钮添加了一个点击事件，为了防止多次触发加速，我们使用一个变量 <code>speeded</code> 来记录元素是否处于加速状态，如果已经处于加速状态，则函数直接返回，否则我们将速度变为原来的四倍，当然不要忘了将元素设置为处于加速状态，然后设置动画的执行时间为 <code>textWidth / speed</code>，我们来看看实际效果</p> <img src="http://blog-hostimaging.oss-cn-beijing.aliyuncs.com/1625153417380.gif" style="zoom:50%;"> <p>可以观察到，当我们点击加速的那个瞬间，动画似乎不对劲，但是哪里不对劲，因为速度太快我没有观察处理，不过我们可以使用数据来告诉我们答案，我们打印改变动画持续时间前后元素的 <code>transfrom</code> 的值，首先我们定义一个函数来获得元素的 <code>translateX</code> 的值</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">getTranslateX</span> <span class="token operator">=</span> <span class="token parameter">ele</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">+</span>window<span class="token punctuation">.</span><span class="token function">getComputedStyle</span><span class="token punctuation">(</span>ele<span class="token punctuation">)</span><span class="token punctuation">.</span>transform<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>上面的函数是怎么得到?</p> <p>首先我们通过 <code>window.getComputedStyle(ele).transform</code> 来获取元素的 <code>transform</code> 属性，它是一个形如下面的字符串</p> <div class="language- extra-class"><pre class="language-text"><code>matrix(1, 0, 0, 1, -97.8686, 0)
</code></pre></div><p>倒数第二个数字 <code>-97.8686</code> 表示的就是 <code>translateX</code> (针对二维的情况，没有 <code>translateZ</code>)，所以我们通过 <code>,</code> 分割字符串，然后获得第五个即下标为 4 的字符串即为 <code>translateX</code> 的值，因为是字符串，所以我在前方加了一元运算符 <code>+</code> 将字符串转换为数字。</p></blockquote> <p>我们在改变动画运行时间前后打印此时的 <code>translateX</code> 的值</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">speedUp</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>speeded<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span>
    <span class="token punctuation">}</span>
    
    speeded <span class="token operator">=</span> <span class="token boolean">true</span>
    speed <span class="token operator">=</span> speed <span class="token operator">*</span> <span class="token number">4</span>

    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'加速前'</span><span class="token punctuation">,</span> <span class="token function">getTranslateX</span><span class="token punctuation">(</span>txt<span class="token punctuation">)</span><span class="token punctuation">)</span>
    txt<span class="token punctuation">.</span>style<span class="token punctuation">.</span>animationDuration <span class="token operator">=</span> textWidth <span class="token operator">/</span> speed <span class="token operator">+</span> <span class="token string">'s'</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'加速后'</span><span class="token punctuation">,</span> <span class="token function">getTranslateX</span><span class="token punctuation">(</span>txt<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><img src="http://blog-hostimaging.oss-cn-beijing.aliyuncs.com/1625154160556.gif" style="zoom:50%;"> <p>我们可以观察到点击前后 <code>translateX</code> 的值发生了相当大的突变，这里我给出一个解释，假设你一开始以 <code>2m/s</code> 的速度进行奔跑，跑了 <code>2s</code>，此时你应该处于 <code>4m</code> 的位置，这时你的速度变为 <code>4m/s</code>，所以浏览器认为你的位置应该处于 <code>8m</code> 的位置，在这个时刻，你的位置发生了突变。</p> <p>那怎么解决这个问题呢? 我的第一个想法是，既然是因为突然加速太快导致严重的突变，那么我慢慢的改变速度(即动画的运行时间)是否就没有这么严重的卡顿问题呢，咱们来试一试</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">speedUp</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>speeded<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 获得当前的动画持续时间</span>
    <span class="token keyword">let</span> duration <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">getComputedStyle</span><span class="token punctuation">(</span>txt<span class="token punctuation">)</span><span class="token punctuation">.</span>animationDuration
    <span class="token comment">// 每次动画持续时间减少 0.1s</span>
    duration <span class="token operator">=</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>duration<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">0.1</span>
    txt<span class="token punctuation">.</span>style<span class="token punctuation">.</span>animationDuration <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>duration<span class="token punctuation">,</span> textWidth<span class="token operator">/</span><span class="token punctuation">(</span>speed <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'s'</span>

    <span class="token comment">// 没有达到指定的动画时间时，就持续调用加速动画</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>duration <span class="token operator">&gt;</span> textWidth<span class="token operator">/</span>speed<span class="token operator">/</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span>speedUp<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        speeded <span class="token operator">=</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>我们首先获得当前动画的持续时间，然后将该动画的持续时间减少 <code>0.1s</code>，如果当前的动画的持续时间没到达到预期的运行时间 <code>textWidth/(speed * 4)</code>，那么就会持续的调用加速函数，时间间隔为 <code>10ms</code>，直至达到希望的时间，我们来看看效果</p> <img src="http://blog-hostimaging.oss-cn-beijing.aliyuncs.com/1625154867508.gif" style="zoom:50%;"> <p>我们可以看到文本没有发生突变，并且动画逐渐的加速起来了，从图中看的效果比较好，如果能够接受逐渐加速的解决方案，似乎已经满足了我们的需求。但是实际的效果比动图所示的效果差，由于录制 <code>GIF</code> 软件帧率的原因，导致效果很好，从我实际观察看，有两个瑕疵：</p> <ul><li>速度越来越快，甚至加速过程中的速度超过了最后加速后的速度</li> <li>有卡顿的效果</li></ul> <p>对此我比较苦恼，开始从数学上是分析原因，这里不给出数学上的推导，给出我得到的两个结论：</p> <ul><li>加速过程中越来越快的问题可以通过改变加速函数的运行时间间隔来解决，当速度较慢时，时间间隔可以较短，此时的突变距离短，看不出来，当速度较快时，需要加长时间间隔，以减缓速度，但是会导致加速时间过长</li> <li>卡段的原因是因为突变，也可以通过改变时间间隔减缓症状，但是消除卡顿的效果会导致加速时间很长(突变是一定有的，不过从效果上感觉不到)</li></ul> <p>基于上述结论，我得到一个简单的时间间隔加速公式(公式没有数学推导)</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">setTimeout</span><span class="token punctuation">(</span>speedUp<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">5</span> <span class="token operator">*</span> <span class="token punctuation">(</span>duration <span class="token operator">-</span> textWidth<span class="token operator">/</span><span class="token punctuation">(</span>speed <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">75</span><span class="token punctuation">)</span>
</code></pre></div><p>这是一个线性函数，当持续时间越接近于最终持续时间，间隔就越长，效果有所改善，但是还是有卡顿效果。</p> <h3 id="创建多个新动画"><a href="#创建多个新动画" class="header-anchor">#</a> 创建多个新动画</h3> <p>那有没有更好的解决办法，似乎我已经做到了极致，经过我苦思冥想，最终还是想出来了。既然我改变动画持续时间会导致突变，那么我可不可以同时改变两个值，比如动画名称以及动画持续时间，我脑中开始浮现一种思路，抛弃原来的动画，创建一个新动画，不过创建一个新的动画会导致突然回到原点，我们只要记录原先旧动画 <code>translateX</code> 的位置，将其设置为新动画的起点，那新旧动画不就衔接上了吗? 我们的 <code>createKeyFrame</code> 函数还不支持设置动画原点的功能，我们将其加上</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">createKeyFrame</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">width<span class="token punctuation">,</span> name<span class="token punctuation">,</span> startPosition <span class="token operator">=</span> <span class="token number">0</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> keyframe <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
        @keyframes </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> {
            0% {
                transform: translateX(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>startPosition<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px);
            }
            100% {
                transform: translateX(-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>width<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px);
            }
        }
        .</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> {
            animation: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>width <span class="token operator">+</span> startPosition<span class="token punctuation">)</span><span class="token operator">/</span>speed<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">s linear infinite
        }
    </span><span class="token template-punctuation string">`</span></span>
    style<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> keyframe
<span class="token punctuation">}</span>
</code></pre></div><p>我们为函数添加了一个新的参数 <code>startPosition</code>，它的默认值为 <code>0</code> (这意味原先的代码不必修改)，然后我们修改了两处：</p> <ol><li>动画的起始设置为了 <code>translateX(${startPosition}px)</code></li> <li>动画的运行时间设置为 <code>${(Math.abs(width + startPosition)/speed).toFixed(2)}s</code>，因为 <code>startPosition</code> 为负数，所以这里是 <code>width + startPosition</code></li></ol> <p>现在我们修改加速函数的逻辑</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">speedUp</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>speeded<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span>
    <span class="token punctuation">}</span>

    speeded <span class="token operator">=</span> <span class="token boolean">true</span>
    speed <span class="token operator">=</span> speed <span class="token operator">*</span> <span class="token number">4</span>

    <span class="token comment">// 获得当前的 translateX</span>
    <span class="token keyword">const</span> translateX <span class="token operator">=</span> <span class="token function">getTranslateX</span><span class="token punctuation">(</span>txt<span class="token punctuation">)</span>
    
    <span class="token comment">// 移除之前添加的慢动画</span>
    txt<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">'slow'</span><span class="token punctuation">)</span>
    <span class="token comment">// 创建一个名为 temp-fast 的新动画</span>
    <span class="token function">createKeyFrame</span><span class="token punctuation">(</span>textWidth<span class="token punctuation">,</span> <span class="token string">'temp-fast'</span><span class="token punctuation">,</span> translateX<span class="token punctuation">)</span>
    <span class="token comment">// 添加新动画</span>
    txt<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'temp-fast'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>上面的代码非常的简单，不多解释了，我们来看看效果</p> <img src="http://blog-hostimaging.oss-cn-beijing.aliyuncs.com/1625156643332.gif" style="zoom:50%;"> <p>我们点击加速按钮的时候，可以观察到动画十分的流畅，没有丝毫的突变，就是有一个缺点就是新动画的开头不是文本的开头，我们接下来解决这个问题，思路很简单，当当前这个动画执行完毕时，我们再次创建一个动画起始位置为文本原点的新动画，然后移除原来的动画，添加新动画。</p> <p>我最开始的想法是使用 <code>setTimeout</code> 不断读取当前的 <code>translateX</code>，当 <code>translateX</code> 与文本的长度很接近时(具体有多接近才叫接近，通过观察控制台，我发现大约在 <code>3px</code> 以内)，可以认为这个动画执行完毕了，这时我们创建这个新动画，该新动画的的起点为文本的原点。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">speedUp</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>speeded<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span>
    <span class="token punctuation">}</span>

    speeded <span class="token operator">=</span> <span class="token boolean">true</span>
    speed <span class="token operator">=</span> speed <span class="token operator">*</span> <span class="token number">4</span>

    <span class="token comment">// 获得当前的 translateX</span>
    <span class="token keyword">const</span> translateX <span class="token operator">=</span> <span class="token function">getTranslateX</span><span class="token punctuation">(</span>txt<span class="token punctuation">)</span>

    <span class="token comment">// 移除之前添加的慢动画</span>
    txt<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">'slow'</span><span class="token punctuation">)</span>
    <span class="token comment">// 创建一个名为 temp-fast 的新动画</span>
    <span class="token function">createKeyFrame</span><span class="token punctuation">(</span>textWidth<span class="token punctuation">,</span> <span class="token string">'temp-fast'</span><span class="token punctuation">,</span> translateX<span class="token punctuation">)</span>
    <span class="token comment">// 添加新动画</span>
    txt<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'temp-fast'</span><span class="token punctuation">)</span>

    <span class="token keyword">const</span> <span class="token function-variable function">reset</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> x <span class="token operator">=</span> <span class="token function">getTranslateX</span><span class="token punctuation">(</span>txt<span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>textWidth <span class="token operator">+</span> x<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 移除临时的快动画</span>
            txt<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">'temp-fast'</span><span class="token punctuation">)</span>
            <span class="token comment">// 创建起始位置为文本原点的动画</span>
            <span class="token function">createKeyFrame</span><span class="token punctuation">(</span>textWidth<span class="token punctuation">,</span> <span class="token string">'fast'</span><span class="token punctuation">)</span>
            <span class="token comment">// 添加新动画</span>
            txt<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'fast'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token function">setTimeout</span><span class="token punctuation">(</span>reset<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token function">reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>我们来看看实际的效果如何</p> <img src="http://blog-hostimaging.oss-cn-beijing.aliyuncs.com/1625157285140.gif" style="zoom:50%;"> <p>可见加速过程十分的流畅，没有任何的卡顿，以及动画也能回到文本的原点了。</p> <p>但是使用定时器耗费性能比较严重，后来经过<strong>高建</strong>师兄指点，我们不必使用定时器，我们只要监听添加的临时动画执行完毕的事件即可，这样既准确，效率又高。那么我们创建的临时动画的执行次数不能是无限次的，而是一次，我们的 <code>createKeyFrame</code> 函数不支持，我们再次改造，为了不修改原来的代码，我们默认执行次数为无限次，如下</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> createKeyFrame <span class="token operator">=</span> <span class="token punctuation">(</span>width<span class="token punctuation">,</span> name<span class="token punctuation">,</span> startPosition <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> iterateCount <span class="token operator">=</span> <span class="token string">'infinite'</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> keyframe <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
        @keyframes </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> {
            0% {
                transform: translateX(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>startPosition<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px);
            }
            100% {
                transform: translateX(-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>width<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px);
            }
        }
        .</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> {
            animation: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>width <span class="token operator">+</span> startPosition<span class="token punctuation">)</span><span class="token operator">/</span>speed<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">s linear </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>iterateCount<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
        }
    </span><span class="token template-punctuation string">`</span></span>
    style<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> keyframe
<span class="token punctuation">}</span>
</code></pre></div><p>接着我们修改加速函数的逻辑，如下</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">speedUp</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>speeded<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span>
    <span class="token punctuation">}</span>

    speeded <span class="token operator">=</span> <span class="token boolean">true</span>
    speed <span class="token operator">=</span> speed <span class="token operator">*</span> <span class="token number">4</span>

    <span class="token comment">// 获得当前的 translateX</span>
    <span class="token keyword">const</span> translateX <span class="token operator">=</span> <span class="token function">getTranslateX</span><span class="token punctuation">(</span>txt<span class="token punctuation">)</span>

    <span class="token comment">// 移除之前添加的慢动画</span>
    txt<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">'slow'</span><span class="token punctuation">)</span>
    <span class="token comment">// 创建一个名为 temp-fast 的新动画，执行一次</span>
    <span class="token function">createKeyFrame</span><span class="token punctuation">(</span>textWidth<span class="token punctuation">,</span> <span class="token string">'temp-fast'</span><span class="token punctuation">,</span> translateX<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token comment">// 添加新动画</span>
    txt<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'temp-fast'</span><span class="token punctuation">)</span>

    txt<span class="token punctuation">.</span><span class="token function-variable function">onanimationend</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        txt<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">'temp-fast'</span><span class="token punctuation">)</span>
        <span class="token comment">// 创建起始位置为文本原点的动画</span>
        <span class="token function">createKeyFrame</span><span class="token punctuation">(</span>textWidth<span class="token punctuation">,</span> <span class="token string">'fast'</span><span class="token punctuation">)</span>
        <span class="token comment">// 添加新动画</span>
        txt<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'fast'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><p>上面的代码修改有两处，第一处是创建临时动画时传入了动画的执行次数</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">createKeyFrame</span><span class="token punctuation">(</span>textWidth<span class="token punctuation">,</span> <span class="token string">'temp-fast'</span><span class="token punctuation">,</span> translateX<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
</code></pre></div><p>第二处就是将定时器的逻辑改为了监听事件</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>txt<span class="token punctuation">.</span><span class="token function-variable function">onanimationend</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    txt<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">'temp-fast'</span><span class="token punctuation">)</span>
    <span class="token comment">// 创建起始位置为文本原点的动画</span>
    <span class="token function">createKeyFrame</span><span class="token punctuation">(</span>textWidth<span class="token punctuation">,</span> <span class="token string">'fast'</span><span class="token punctuation">)</span>
    <span class="token comment">// 添加新动画</span>
    txt<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'fast'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这次我们来看效果如下</p> <img src="http://blog-hostimaging.oss-cn-beijing.aliyuncs.com/1625157889578.gif" style="zoom:50%;"> <p>这个动画真的非常的丝滑，比德芙还丝滑。</p> <p>同样的我们加上减速的逻辑，其思路同加速一模一样，我们直接呈上代码</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> downBtn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'slowDown'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token function-variable function">slowDown</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>speeded<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span>
    <span class="token punctuation">}</span>
    speeded <span class="token operator">=</span> <span class="token boolean">false</span>
    speed <span class="token operator">=</span> speed <span class="token operator">/</span> <span class="token number">4</span>

    <span class="token keyword">const</span> translateX <span class="token operator">=</span> <span class="token function">getTranslateX</span><span class="token punctuation">(</span>txt<span class="token punctuation">)</span>
    
    txt<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">'fast'</span><span class="token punctuation">,</span> <span class="token string">'temp-fast'</span><span class="token punctuation">)</span>
    <span class="token comment">// 创建临时慢动画</span>
    <span class="token function">createKeyFrame</span><span class="token punctuation">(</span>textWidth<span class="token punctuation">,</span> translateX<span class="token punctuation">,</span> <span class="token string">'temp-slow'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
    txt<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'temp-slow'</span><span class="token punctuation">)</span>

    txt<span class="token punctuation">.</span><span class="token function-variable function">onanimationend</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        txt<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">'temp-slow'</span><span class="token punctuation">)</span>
        <span class="token comment">// 创建起始位置为文本原点的动画</span>
        <span class="token function">createKeyFrame</span><span class="token punctuation">(</span>textWidth<span class="token punctuation">,</span> <span class="token string">'slow'</span><span class="token punctuation">)</span>
        <span class="token comment">// 添加新动画</span>
        txt<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'slow'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
downBtn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> slowDown<span class="token punctuation">)</span>
</code></pre></div><p>逻辑可以说同加速一模一样了，不过有一个地方不同，因为当我们点击减速时，动画可能处于临时加速状态，也可能处于真正的加速状态，所以创建临时慢动画之前，两个动画都要移除</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>txt<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">'fast'</span><span class="token punctuation">,</span> <span class="token string">'temp-fast'</span><span class="token punctuation">)</span>
</code></pre></div><p>同理点击加速按钮时也是同理，在创建临时快动画之前，我们要移除两个慢动画</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>txt<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">'slow'</span><span class="token punctuation">,</span> <span class="token string">'temp-slow'</span><span class="token punctuation">)</span>
</code></pre></div><p>在这里呼应一下前文，我们说当文本的长度小于容器的长度时(我们的实际文本是可以动态改变的，所以之前的文本可能处于动画状态，当改变文本后其长度就可能小于容器长度)，我们不添加动画，并且移除所有动画</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>textWidth <span class="token operator">&lt;=</span> <span class="token number">500</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 不仅不添加动画，而且要移除之前添加的动画</span>
    txt<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">'slow'</span><span class="token punctuation">,</span> <span class="token string">'temp-slow'</span><span class="token punctuation">,</span> <span class="token string">'fast'</span><span class="token punctuation">,</span> <span class="token string">'temp-fast'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span>
<span class="token punctuation">}</span>
</code></pre></div><p>现在是不是感觉豁然开朗呢！</p> <h2 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h2> <p>本文探讨了跑马灯动画，一个是跑马灯动画的无缝衔接，解决办法是复制相同的文本，如果你已经理解了该动画的原理，你可以马上明白，不需要复制所有的文本，只需要复制的文本长度能够覆盖容器的长度即可。</p> <p>另一个我们探讨了动画的加减速，我们首先阐述了我们遇到的问题，那就是 <code>translateX</code> 的突变，针对这个问题我首先提出缓慢的改变动画的持续时间，以减少急剧的突变，该种方法某种程度上的确减缓突变的症状，但是会有一段加速的时间，以及突变不可避免，只是轻重而已，从效果上看有卡顿效果；除此之外我又提出了另外一种解决办法，那就是在点击加速时，记录此时的 <code>translateX</code>，并且抛弃原来的动画，另起炉灶创建一个临时新动画，为了不产生突变，临时新动画的起点设置为此时的 <code>translateX</code>，然后监听该临时动画的动画完毕事件，在事件处理函数中我们添加一个动画起点位置为文本原点的真正的新动画，从效果上看真的是十分的丝滑。</p> <p><strong>另外本文的动画全部使用 <code>CSS</code> 实现，所以它的性能十分的好。</strong></p> <!----></div> <footer class="page-meta"><div class="edit-link"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon edit-icon"><path d="M117.953 696.992 64.306 959.696l265.931-49.336 450.204-452.505-212.284-213.376-450.204 452.513zm496.384-296.326L219.039 797.993l-46.108-46.34L568.233 354.33l46.104 46.335zm345.357-122.99-114.45 115.04-212.288-213.377 114.45-115.035 212.288 213.371zm0 0" fill="currentColor"></path></svg> <a href="https://github.com/LastKnightCoder/vuepress-blog/edit/master/docs/随笔/跑马灯动画.md" target="_blank" rel="noopener noreferrer">Edit this page</a></div> <div class="meta-item update-time"><span class="label">Last update:</span> <span class="info">July 11, 2021 13:12</span></div> <!----></footer> <!----> <!----> </main> <!----></div><div class="global-ui"><!----><!----><div id="pwa-install"><!----> <div id="install-modal-wrapper" style="display:none;"><div class="background"></div> <div class="install-modal"><div class="header"><button aria-label="Close" class="close-button"><svg width="23" height="22" xmlns="http://www.w3.org/2000/svg" class="icon close-icon"><path fill-rule="evenodd" clip-rule="evenodd" d="M1.12.358a1.224 1.224 0 011.729 0l8.92 8.914L20.686.358a1.224 1.224 0 011.73 1.728L13.497 11l8.92 8.913a1.222 1.222 0 11-1.73 1.729l-8.919-8.913-8.92 8.913a1.224 1.224 0 01-1.729-1.729L10.04 11l-8.92-8.914a1.222 1.222 0 010-1.728z" fill="currentColor"></path></svg></button> <div class="logo"><!----> <div class="title"><h1></h1> <p class="desc">This app can be installed on your PC or mobile device.  This will allow this web app to look and behave like any other installed app.  You will find it in your app lists and be able to pin it to your home screen, start menus or task bars.  This installed web app will also be able to safely interact with other apps and your operating system. </p></div></div></div> <div class="content"><div class="highlight"><!----> <!----></div> <div class="description"><h3>Description</h3> <p></p></div></div> <div class="button-wrapper"><button class="install-button">
        Install <span></span></button> <button class="cancel-button">
        Cancel
      </button></div></div></div></div><div tabindex="-1" role="dialog" aria-hidden="true" class="pswp"><div class="pswp__bg"></div> <div class="pswp__scroll-wrap"><div class="pswp__container"><div class="pswp__item"></div> <div class="pswp__item"></div> <div class="pswp__item"></div></div> <div class="pswp__ui pswp__ui--hidden"><div class="pswp__top-bar"><div class="pswp__counter"></div> <button class="pswp__button pswp__button--close"></button> <button class="pswp__button pswp__button--share"></button> <button class="pswp__button pswp__button--fs"></button> <button class="pswp__button pswp__button--zoom"></button> <div class="pswp__preloader"><div class="pswp__preloader__icn"><div class="pswp__preloader__cut"><div class="pswp__preloader__donut"></div></div></div></div></div> <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class="pswp__share-tooltip"></div></div> <button class="pswp__button pswp__button--arrow--left"></button> <button class="pswp__button pswp__button--arrow--right"></button> <div class="pswp__caption"><div class="pswp__caption__center"></div></div></div></div></div><div class="my-popup" style="display:none;" data-v-5f98aac3><div class="my-popup-container" data-v-5f98aac3><div class="my-popup-exit" data-v-5f98aac3></div> <img src="" alt data-v-5f98aac3></div></div></div></div>
    <script src="/vuepress-blog/assets/js/app.978b4b90.js" defer></script><script src="/vuepress-blog/assets/js/layout-Layout.210bf3ea.js" defer></script><script src="/vuepress-blog/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound.d08842b8.js" defer></script><script src="/vuepress-blog/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound~layout-Slide.2cdb5d8c.js" defer></script><script src="/vuepress-blog/assets/js/vendors~layout-Blog~layout-Layout.e95ed9ce.js" defer></script><script src="/vuepress-blog/assets/js/page-跑马灯动画.da1169c9.js" defer></script>
  </body>
</html>
