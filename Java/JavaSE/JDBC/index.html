<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JDBC | Coder</title>
    <meta name="generator" content="VuePress 1.8.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/2.10.0/github-markdown.min.css">
    <link rel="manifest" href="/manifest.webmanifest" crossorigin="use-credentials">
    <meta name="description" content="操千曲而后晓声，观千剑而后识器">
    <meta property="og:url" content="/Java/JavaSE/JDBC.html">
    <meta property="og:site_name" content="Coder">
    <meta property="og:title" content="JDBC">
    <meta property="og:type" content="article">
    <meta property="og:locale" content="en-US">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image:alt" content="Coder">
    <meta property="article:author" content="熊滔">
    <meta property="article:published_time" content="2019-08-15T00:00:00.000Z">
    <meta name="theme-color" content="#46bd87">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    
    <link rel="preload" href="/vuepress-blog/assets/css/0.styles.0b828f68.css" as="style"><link rel="preload" href="/vuepress-blog/assets/js/app.6c4940a6.js" as="script"><link rel="preload" href="/vuepress-blog/assets/js/layout-Layout.a1d8ce1f.js" as="script"><link rel="preload" href="/vuepress-blog/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound.ad9e522a.js" as="script"><link rel="preload" href="/vuepress-blog/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound~layout-Slide.faf2ead7.js" as="script"><link rel="preload" href="/vuepress-blog/assets/js/vendors~layout-Blog~layout-Layout.d2f37dee.js" as="script"><link rel="preload" href="/vuepress-blog/assets/js/page-JDBC.6d4fa59a.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/js/267.b342ff22.js"><link rel="prefetch" href="/vuepress-blog/assets/js/268.519ab5f0.js"><link rel="prefetch" href="/vuepress-blog/assets/js/269.129a2a3a.js"><link rel="prefetch" href="/vuepress-blog/assets/js/270.af0e8c9d.js"><link rel="prefetch" href="/vuepress-blog/assets/js/271.4ce8df5a.js"><link rel="prefetch" href="/vuepress-blog/assets/js/272.3bce53af.js"><link rel="prefetch" href="/vuepress-blog/assets/js/273.f281cded.js"><link rel="prefetch" href="/vuepress-blog/assets/js/274.95c8ee49.js"><link rel="prefetch" href="/vuepress-blog/assets/js/275.7a6e3d5b.js"><link rel="prefetch" href="/vuepress-blog/assets/js/276.6a3a74d9.js"><link rel="prefetch" href="/vuepress-blog/assets/js/277.9c84a63e.js"><link rel="prefetch" href="/vuepress-blog/assets/js/278.2a5c5bc8.js"><link rel="prefetch" href="/vuepress-blog/assets/js/279.be9adfbd.js"><link rel="prefetch" href="/vuepress-blog/assets/js/280.3d54fecb.js"><link rel="prefetch" href="/vuepress-blog/assets/js/281.bcb337b0.js"><link rel="prefetch" href="/vuepress-blog/assets/js/282.346dafa1.js"><link rel="prefetch" href="/vuepress-blog/assets/js/283.51c67638.js"><link rel="prefetch" href="/vuepress-blog/assets/js/284.529d8452.js"><link rel="prefetch" href="/vuepress-blog/assets/js/285.bcbc2306.js"><link rel="prefetch" href="/vuepress-blog/assets/js/286.d07cc261.js"><link rel="prefetch" href="/vuepress-blog/assets/js/287.a7866683.js"><link rel="prefetch" href="/vuepress-blog/assets/js/288.6214b7ca.js"><link rel="prefetch" href="/vuepress-blog/assets/js/289.b56487fd.js"><link rel="prefetch" href="/vuepress-blog/assets/js/290.89245206.js"><link rel="prefetch" href="/vuepress-blog/assets/js/291.140072ed.js"><link rel="prefetch" href="/vuepress-blog/assets/js/292.dcd065e5.js"><link rel="prefetch" href="/vuepress-blog/assets/js/293.86c68b0c.js"><link rel="prefetch" href="/vuepress-blog/assets/js/294.13103015.js"><link rel="prefetch" href="/vuepress-blog/assets/js/295.a06878b8.js"><link rel="prefetch" href="/vuepress-blog/assets/js/296.c55d3df7.js"><link rel="prefetch" href="/vuepress-blog/assets/js/297.15d210e5.js"><link rel="prefetch" href="/vuepress-blog/assets/js/298.553e84cc.js"><link rel="prefetch" href="/vuepress-blog/assets/js/layout-Blog.d99dc982.js"><link rel="prefetch" href="/vuepress-blog/assets/js/layout-NotFound.186795ba.js"><link rel="prefetch" href="/vuepress-blog/assets/js/layout-Slide.82dcf196.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page--0a04a769.b92d9518.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page--0b34b25c.7fd4d4c7.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page--23976064.39b4ee69.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page--2dfd1302.2cf343fb.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page--31f03e94.35e1a170.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page--31f2235e.d12dcd10.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page--394a8838.1be26838.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page--3d06fd30.6df896a0.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page--4177f44f.95268e1d.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page--49092b39.f056e548.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page--4cdb2d5e.5e4b3736.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page--53aa7295.8cf45736.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page--55b17791.77a4eafe.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page--5a0b79b9.0d590a56.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page--5b0bc6f3.9572dc2b.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page--5cdb23a2.e7003881.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page--5e2a2528.b58685b5.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page--5e88f7b9.c47b263b.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page--6a3041e0.38aca0b6.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page--73523920.b10931f7.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page--74a54201.b330b510.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page--770dc866.75904189.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page--8b1659d8.084d4c79.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page--91a462b0.58ae7936.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page--bb2816a4.f6a07872.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page--c36fd708.692c8977.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page--c4024488.2865b73e.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page--e3b9d218.04713c66.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page--e66591a0.44cbd2b6.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page--e747909c.5ebc5ca3.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page--eba94b72.301d96d1.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page--fe0972a8.42188339.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-1~n整数中1出现的次数.1cd4a7d6.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-AVL树.498c9415.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-CSS介绍.47aeff8d.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-DDL.75ce8625.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-DFT变换的性质.8731fdee.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-DML.c97141d3.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-DQL.062946fe.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-DTFT.57ebf4e4.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-ES6.ca3794fb.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-FFT及其框图实现.75c9c5fd.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-HTML.e653d18c.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-HTML简介.d6d9264c.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-Home.d4eee152.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-Java8新特性.fcd67d47.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-JavaSE目录.ae2a8904.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-JavaScript.67c58a1d.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-JavaScript中的冒泡与捕获.95d163b7.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-JavaScript中的类.80b915f5.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-JavaScript的作用域.71a4d525.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-Java反射.897d4394.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-Java基础知识介绍.afa241d5.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-Java多线程.789f3c65.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-Java常用API.3b15d7c4.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-Java开发环境搭建.18404075.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-Java异常.8b678331.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-Java文件操作.a1a82a05.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-Java注解.9d7386cf.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-Java网络编程.b1b839de.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-Java集合与泛型.a15167e3.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-Java面向对象.393458c3.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-MyBatis入门.e4ec8be5.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-MySQL.4a0b1212.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-MySQL基本概念.a817e1a8.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-Node.44829b39.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-Nodejs之Buffer.287557a2.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-Nodejs之EventEmitter.5a75b169.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-Nodejs之Express入门.a20ef15c.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-Nodejs之HTTP.b4d06432.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-Nodejs之Koa.89fdfd3c.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-Nodejs之MongoDB.9fc0393e.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-Nodejs之Stream.e4d93235.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-Nodejs之事件循环.af27de48.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-Nodejs之操作系统.6e224eaa.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-Nodejs之文件系统.87c50dcd.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-Nodejs之模块系统.f57bca2f.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-Nodejs之路径.535789f2.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-Pow(x,n).4437695a.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-Promise与异步编程.c7fcd98a.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-Promise的使用.1bc23705.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-Proxy和Reflect.038ece29.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-Set集合与Map集合.79781c8f.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-Symbol和Symbol属性.1aad508b.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-Trie.096ea0eb.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-TypeScript.36fc6f52.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-VueRouter.51466794.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-Vuejs入门.5d5857b8.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-Vuex.43b53f82.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-Vue带来的开发思维的改变.73f66e48.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-Vue目录.1c357bf6.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-Z变换.51605218.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-Z变换解差分方程的思考.7a5f0389.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-let和const.c8c0fbc6.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-n个骰子的点数.fc42c2ba.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-vue-cli的使用.3214ce45.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-x的平方根.341914e0.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-三大范式.14ef9643.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-三数之和.852f6907.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-不同路径.f0a0bf54.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-丑数.1fdb8daf.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-两个链表的第一个公共节点.63fdab3a.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-两数之和.36c07b67.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-二分搜索树.bc91f824.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-二叉搜索树与双向链表.3a34af63.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-二叉搜索树的后序遍历序列.2df458d0.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-二叉树中和为某一值的路径.9165b935.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-二叉树的下一个节点.a540c06e.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-二叉树的深度.6773ce3a.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-二叉树的第k大节点.d800630f.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-二叉树的镜像.6716ef0f.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-二维数组中的查找.c5c9fb73.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-二进制中1的个数.ad5e8ab3.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-介绍.9da3bcc3.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-从DFS到DFT.2672cf59.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-从上到下打印二叉树.db295fb2.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-从尾到头打印链表.d63570e0.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-优先队列和堆.2b9f5cfd.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-信号的相关.5e642afc.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-入门使用.9526a474.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-全排列.c29f31fd.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-准备工作.168df7fe.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-函数.be130086.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-列表.cadc9a6d.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-初识Vue.82fa20e9.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-删除有序数组中的重复项.f487074a.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-删除链表的节点.e3f71092.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-刷题.d85243a7.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-剪绳子.88d9f1b3.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-动态数组.bfebf8ba.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-动画.ac57287b.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-包含min函数的栈.4587ace2.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-匹配问题.b0e7b4a5.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-单例模式.49fe4244.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-单词搜索.582f61db.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-反转链表.a30e06f9.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-合并K个升序链表.8003a82e.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-合并两个排序的链表.939d1797.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-合并区间.39806605.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-同源策略.fb202169.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-和为s的数字.e9a324ea.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-哈密尔顿回路.4e9c77c2.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-哈希表.6a568913.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-回溯法.889a3205.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-图片.662b386c.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-图的广度优先遍历.c3d3a823.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-图的深度优先遍历.533a6866.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-图的表示.2b4e4b06.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-图论.c5f59cd6.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-图论建模.26caa422.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-圆周卷积.96571a63.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-圆圈中最后剩下的数字.ffd6d398.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-在排序数组中查找数字.79e08987.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-基本类型.a61ed962.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-堆排序.ff951d12.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-声明合并.c7a4bcad.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-复杂链表的复制.7fe65d59.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-外观数列.4f96afab.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-多表查询.6df63c05.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-字母异位词分组.fbef8b3f.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-字符串和正则表达式.7588b673.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-字符串的排列.21bfbd64.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-层叠与优先级.1372e397.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-希尔排序.fb43b3f9.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-并查集.db7b8f38.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-序列化二叉树.2dba0fb1.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-归并排序.3fe0edeb.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-快速排序.65e4f0b5.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-扑克牌中的顺子.314b3e2f.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-打印从1到最大的n位数.ce545800.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-扩展对象的功能性.ce67b537.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-把数字翻译成字符串.34c62c39.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-把数组排成最小的数.83d04f0a.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-接口.6250e76c.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-插入排序.50d769df.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-插槽.cd2a2786.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-改进的数组功能.26ccf241.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-数值的整数次方.ff0f3b7c.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-数字序列中某一位的数字.a7113e55.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-数据流中的中位数.2437ad92.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-数据结构.5c9de7be.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-数组中出现次数超过一半的数字.6ab34718.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-数组中数字出现的次数.0bd66882.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-数组中的逆序对.a3d91907.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-数组中的重复的数字.ec5f2f25.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-文本标签.e21aa21a.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-斐波那契数列.11603d13.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-方程与框图的转换.aa88092e.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-旋转数组的最小数字.a9898625.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-旋转链表.202e499a.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-最大子序和.8a846b34.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-最大子数组和以及最长子字符串.2f8f7399.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-最小生成树.2a112f28.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-最小的k个数.03c4734b.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-最小路径和.e17a79b8.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-最短路径算法.2538b770.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-最长回文字符串.d960be09.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-有向图算法.e3964e85.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-有限长序列的分类.2284ae44.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-权限管理.a7811fe4.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-柯里化介绍.a762dacb.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-栈.92b339dc.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-栈的压入弹出序列.8af346f3.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-树的子结构.a94c99dc.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-桥和割点.68a709ed.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-概述.7174e62b.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-模板语法.54ca59cc.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-欧拉回路.fd692b43.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-正则表达式的匹配.b17764ea.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-泛型.012d4e28.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-生命周期.6516e6a4.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-用DFT计算线性卷积.b6e35dd5.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-用两个栈实现队列.394a7d12.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-用模块封装代码.9291dca1.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-盒子模型.60268093.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-盛水最多的容器.36f11815.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-礼物的最大价值.d8db3be1.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-第一个只出现一次的字符.f2d9c498.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-简化路径.d2cf414e.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-算法.29ddad22.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-类.d244b9a7.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-类型断言.9058098b.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-红黑树.66457bea.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-约束.b8c955b8.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-线段树.92b1b8bd.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-组件.47af6be2.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-组合.8e89b01c.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-组合总数.d10ad63e.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-网络流与最大流.7962fb0b.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-罗马数字与数字的转换.eb4e8a27.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-翻转字符串.675168b8.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-股票的最大利润.724cca41.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-表单(一).90d23d93.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-表单(二).a0c8e989.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-表格.9bfbd51e.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-表示数值的字符串.dd6dadd0.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-解构.80b6be50.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-计算属性与监听器.75ceadf9.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-调整数组顺序使奇数位于偶数之前.da7431b6.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-超链接.903dae02.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-跳跃游戏.30a334b2.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-连续时间信号的抽样及其重建.02e1cd64.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-迭代器与生成器.3a3f5756.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-选择器(一).4e3611fc.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-选择器(二).4a2d25b9.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-选择排序.00fe3a9e.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-重建二叉树.15b342b1.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-链表.32859e0b.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-链表中倒数第k个节点.74b903d4.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-链表中环的入口节点.60308793.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-队列.d0363f4c.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-队列的最大值.5037086a.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-顺时针打印矩阵.27fd0919.js"><link rel="prefetch" href="/vuepress-blog/assets/js/page-高级类型.39de1cfc.js"><link rel="prefetch" href="/vuepress-blog/assets/js/vendors~flowchart.c2106d7e.js"><link rel="prefetch" href="/vuepress-blog/assets/js/vendors~photo-swipe.f29d8c2a.js"><link rel="prefetch" href="/vuepress-blog/assets/js/vendors~reveal.50577421.js">
    <link rel="stylesheet" href="/vuepress-blog/assets/css/0.styles.0b828f68.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container has-navbar"><header class="navbar"><button class="sidebar-button"><span class="icon"></span></button> <a href="/vuepress-blog/" class="home-link router-link-active"><!----> <!----> <span class="site-name">Coder</span></a> <div class="links"><button class="color-button"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="skin-icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4
        38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32
        51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0
        102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2
        6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4
        0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2
        9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224
        419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4
        470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0
        22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6
        12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128
        505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2
        16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8
        86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4
        80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6
        6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg> <div class="color-picker-menu" style="display:none;"><div class="theme-options"><ul class="themecolor-select"><label for="themecolor-select">Theme Color:</label> <li><a href="#" class="default-theme"></a></li> </ul> <div class="darkmode-toggle"><label for="darkmode-toggle" class="desc">Theme Mode:</label> <div class="darkmode-switch"><div class="item day"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon light-icon"><path d="M512 256a42.667 42.667 0 0042.667-42.667V128a42.667 42.667 0 00-85.334 0v85.333A42.667 42.667 0 00512 256zm384 213.333h-85.333a42.667 42.667 0 000 85.334H896a42.667 42.667 0 000-85.334zM256 512a42.667 42.667 0 00-42.667-42.667H128a42.667 42.667 0 000 85.334h85.333A42.667 42.667 0 00256 512zm9.387-298.667a42.667 42.667 0 00-59.307 62.72l61.44 59.307a42.667 42.667 0 0031.147 11.947 42.667 42.667 0 0030.72-13.227 42.667 42.667 0 000-60.16zm459.946 133.974a42.667 42.667 0 0029.44-11.947l61.44-59.307a42.667 42.667 0 00-57.6-62.72l-61.44 60.587a42.667 42.667 0 000 60.16 42.667 42.667 0 0028.16 13.227zM512 768a42.667 42.667 0 00-42.667 42.667V896a42.667 42.667 0 0085.334 0v-85.333A42.667 42.667 0 00512 768zm244.48-79.36a42.667 42.667 0 00-59.307 61.44l61.44 60.587a42.667 42.667 0 0029.44 11.946 42.667 42.667 0 0030.72-12.8 42.667 42.667 0 000-60.586zm-488.96 0l-61.44 59.307a42.667 42.667 0 000 60.586 42.667 42.667 0 0030.72 12.8 42.667 42.667 0 0028.587-10.666l61.44-59.307a42.667 42.667 0 00-59.307-61.44zM512 341.333A170.667 170.667 0 10682.667 512 170.667 170.667 0 00512 341.333z" fill="currentColor"></path></svg></div> <div class="item auto active"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon auto-icon"><path d="M460.864 539.072H564.8L510.592 376l-49.728 163.072zM872 362.368V149.504H659.648L510.528 0l-149.12 149.504H149.12v212.928L0 511.872l149.12 149.504v212.928h212.352l149.12 149.504 149.12-149.504h212.352V661.376l149.12-149.504L872 362.368zM614.464 693.12l-31.616-90.624H438.272l-31.616 90.624h-85.888l144.576-407.68h90.368l144.576 407.68h-85.824zm0 0" fill="currentColor"></path></svg></div> <div class="item night"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon dark-icon"><path d="M935.539 630.402c-11.43-11.432-28.674-14.739-43.531-8.354-46.734 20.103-96.363 30.297-147.508 30.297-99.59 0-193.221-38.784-263.64-109.203-108.637-108.637-139.61-270.022-78.908-411.148a39.497 39.497 0 00-51.886-51.887c-52.637 22.64-100.017 54.81-140.826 95.616-85.346 85.346-132.346 198.821-132.346 319.52 0 120.7 47.001 234.172 132.347 319.519S408.063 947.11 528.76 947.11c120.7 0 234.172-47.003 319.52-132.351 40.809-40.81 72.978-88.19 95.616-140.826a39.497 39.497 0 00-8.356-43.532z" fill="currentColor"></path></svg></div></div> <!----></div></div></div></button> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/vuepress-blog/" class="nav-link router-link-active"><i class="iconfont icon-home"></i>
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据结构与算法" class="dropdown-title"><span class="title"><i class="iconfont icon-alo"></i>
      数据结构与算法
    </span> <span class="arrow down"></span></button> <button type="button" aria-label="数据结构与算法" class="mobile-dropdown-title"><span class="title"><i class="iconfont icon-alo"></i>
      数据结构与算法
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress-blog/数据结构/" class="nav-link"><i class="iconfont icon-data-structure"></i>
  数据结构
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/算法/" class="nav-link"><i class="iconfont icon-alo"></i>
  算法
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/刷题/" class="nav-link"><i class="iconfont icon-offer"></i>
  刷题
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="大前端" class="dropdown-title"><span class="title"><i class="iconfont icon-front-end"></i>
      大前端
    </span> <span class="arrow down"></span></button> <button type="button" aria-label="大前端" class="mobile-dropdown-title"><span class="title"><i class="iconfont icon-front-end"></i>
      大前端
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress-blog/HTML/" class="nav-link"><i class="iconfont icon-html"></i>
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/CSS/" class="nav-link"><i class="iconfont icon-css"></i>
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/JavaScript/" class="nav-link"><i class="iconfont icon-Bomb"></i>
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/TypeScript/" class="nav-link"><i class="iconfont icon-book"></i>
  TypeScript
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/ES6/" class="nav-link"><i class="iconfont icon-ES6"></i>
  ES6
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/Node/" class="nav-link"><i class="iconfont icon-Node"></i>
  Node
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/Webpack/" class="nav-link"><i class="iconfont icon-webpack"></i>
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/Vue/" class="nav-link"><i class="iconfont icon-Vue"></i>
  Vue
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><span class="title"><i class="iconfont icon-Java"></i>
      Java
    </span> <span class="arrow down"></span></button> <button type="button" aria-label="Java" class="mobile-dropdown-title"><span class="title"><i class="iconfont icon-Java"></i>
      Java
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress-blog/Java/JavaSE/" class="nav-link router-link-active"><i class="iconfont icon-JavaSE"></i>
  Java基础
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/Java/框架/" class="nav-link"><i class="iconfont icon-Spring"></i>
  框架
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><span class="title"><i class="iconfont icon-shujuku"></i>
      数据库
    </span> <span class="arrow down"></span></button> <button type="button" aria-label="数据库" class="mobile-dropdown-title"><span class="title"><i class="iconfont icon-shujuku"></i>
      数据库
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress-blog/数据库/MySQL/" class="nav-link"><i class="iconfont icon-mysql"></i>
  MySQL
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="信号处理" class="dropdown-title"><span class="title"><i class="iconfont icon-signal"></i>
      信号处理
    </span> <span class="arrow down"></span></button> <button type="button" aria-label="信号处理" class="mobile-dropdown-title"><span class="title"><i class="iconfont icon-signal"></i>
      信号处理
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress-blog/信号处理/数字信号处理/" class="nav-link"><i class="iconfont icon-matching"></i>
  数字信号处理
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="收藏" class="dropdown-title"><span class="title"><i class="iconfont icon-shoucang"></i>
      收藏
    </span> <span class="arrow down"></span></button> <button type="button" aria-label="收藏" class="mobile-dropdown-title"><span class="title"><i class="iconfont icon-shoucang"></i>
      收藏
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress-blog/收藏/文章.html" class="nav-link"><i class="iconfont icon-wenzhang"></i>
  文章
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/收藏/网站.html" class="nav-link"><i class="iconfont icon-website"></i>
  网站
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/收藏/视频.html" class="nav-link"><i class="iconfont icon-shipin"></i>
  视频
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/收藏/公众号.html" class="nav-link"><i class="iconfont icon-gongzhonghao"></i>
  公众号
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/收藏/书.html" class="nav-link"><i class="iconfont icon-shu"></i>
  书
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/收藏/电影.html" class="nav-link"><i class="iconfont icon-dianying"></i>
  电影
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <nav class="nav-links"><div class="nav-item"><a href="/vuepress-blog/" class="nav-link router-link-active"><i class="iconfont icon-home"></i>
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据结构与算法" class="dropdown-title"><span class="title"><i class="iconfont icon-alo"></i>
      数据结构与算法
    </span> <span class="arrow down"></span></button> <button type="button" aria-label="数据结构与算法" class="mobile-dropdown-title"><span class="title"><i class="iconfont icon-alo"></i>
      数据结构与算法
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress-blog/数据结构/" class="nav-link"><i class="iconfont icon-data-structure"></i>
  数据结构
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/算法/" class="nav-link"><i class="iconfont icon-alo"></i>
  算法
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/刷题/" class="nav-link"><i class="iconfont icon-offer"></i>
  刷题
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="大前端" class="dropdown-title"><span class="title"><i class="iconfont icon-front-end"></i>
      大前端
    </span> <span class="arrow down"></span></button> <button type="button" aria-label="大前端" class="mobile-dropdown-title"><span class="title"><i class="iconfont icon-front-end"></i>
      大前端
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress-blog/HTML/" class="nav-link"><i class="iconfont icon-html"></i>
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/CSS/" class="nav-link"><i class="iconfont icon-css"></i>
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/JavaScript/" class="nav-link"><i class="iconfont icon-Bomb"></i>
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/TypeScript/" class="nav-link"><i class="iconfont icon-book"></i>
  TypeScript
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/ES6/" class="nav-link"><i class="iconfont icon-ES6"></i>
  ES6
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/Node/" class="nav-link"><i class="iconfont icon-Node"></i>
  Node
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/Webpack/" class="nav-link"><i class="iconfont icon-webpack"></i>
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/Vue/" class="nav-link"><i class="iconfont icon-Vue"></i>
  Vue
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><span class="title"><i class="iconfont icon-Java"></i>
      Java
    </span> <span class="arrow down"></span></button> <button type="button" aria-label="Java" class="mobile-dropdown-title"><span class="title"><i class="iconfont icon-Java"></i>
      Java
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress-blog/Java/JavaSE/" class="nav-link router-link-active"><i class="iconfont icon-JavaSE"></i>
  Java基础
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/Java/框架/" class="nav-link"><i class="iconfont icon-Spring"></i>
  框架
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><span class="title"><i class="iconfont icon-shujuku"></i>
      数据库
    </span> <span class="arrow down"></span></button> <button type="button" aria-label="数据库" class="mobile-dropdown-title"><span class="title"><i class="iconfont icon-shujuku"></i>
      数据库
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress-blog/数据库/MySQL/" class="nav-link"><i class="iconfont icon-mysql"></i>
  MySQL
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="信号处理" class="dropdown-title"><span class="title"><i class="iconfont icon-signal"></i>
      信号处理
    </span> <span class="arrow down"></span></button> <button type="button" aria-label="信号处理" class="mobile-dropdown-title"><span class="title"><i class="iconfont icon-signal"></i>
      信号处理
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress-blog/信号处理/数字信号处理/" class="nav-link"><i class="iconfont icon-matching"></i>
  数字信号处理
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="收藏" class="dropdown-title"><span class="title"><i class="iconfont icon-shoucang"></i>
      收藏
    </span> <span class="arrow down"></span></button> <button type="button" aria-label="收藏" class="mobile-dropdown-title"><span class="title"><i class="iconfont icon-shoucang"></i>
      收藏
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress-blog/收藏/文章.html" class="nav-link"><i class="iconfont icon-wenzhang"></i>
  文章
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/收藏/网站.html" class="nav-link"><i class="iconfont icon-website"></i>
  网站
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/收藏/视频.html" class="nav-link"><i class="iconfont icon-shipin"></i>
  视频
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/收藏/公众号.html" class="nav-link"><i class="iconfont icon-gongzhonghao"></i>
  公众号
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/收藏/书.html" class="nav-link"><i class="iconfont icon-shu"></i>
  书
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/收藏/电影.html" class="nav-link"><i class="iconfont icon-dianying"></i>
  电影
</a></li></ul></div></div> <!----></nav>  <!----> </aside> <main class="page"><nav class="breadcrumb"><ul><li><a href="/vuepress-blog/Java/JavaSE/" class="router-link-active"><!---->
        Java SE目录
      </a></li><li class="is-active"><a href="/vuepress-blog/Java/JavaSE/JDBC/" aria-current="page" class="router-link-exact-active router-link-active"><!---->
        JDBC
      </a></li></ul></nav>  <div class="page-title"><h1><!---->
    JDBC
  </h1> <div class="page-info"><!----> <!----><span aria-label="Page views🔢" data-balloon-pos="down" class="visitor-info"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon eye-icon"><path d="M992 512.096c0-5.76-.992-10.592-1.28-11.136-.192-2.88-1.152-8.064-2.08-10.816-.256-.672-.544-1.376-.832-2.08-.48-1.568-1.024-3.104-1.6-4.32C897.664 290.112 707.104 160 512 160c-195.072 0-385.632 130.016-473.76 322.592-1.056 2.112-1.792 4.096-2.272 5.856a55.512 55.512 0 00-.64 1.6c-1.76 5.088-1.792 8.64-1.632 7.744-.832 3.744-1.568 11.168-1.568 11.168-.224 2.272-.224 4.032.032 6.304 0 0 .736 6.464 1.088 7.808.128 1.824.576 4.512 1.12 6.976h-.032c.448 2.08 1.12 4.096 1.984 6.08.48 1.536.992 2.976 1.472 4.032C126.432 733.856 316.992 864 512 864c195.136 0 385.696-130.048 473.216-321.696 1.376-2.496 2.24-4.832 2.848-6.912.256-.608.48-1.184.672-1.728 1.536-4.48 1.856-8.32 1.728-8.32l-.032.032c.608-3.104 1.568-7.744 1.568-13.28zM512 672c-88.224 0-160-71.776-160-160s71.776-160 160-160 160 71.776 160 160-71.776 160-160 160z" fill="currentColor"></path></svg> <span id="/vuepress-blog/Java/JavaSE/JDBC/" data-flag-title="JDBC" class="leancloud_visitors"><span class="leancloud-visitors-count">...</span></span></span><span aria-label="Writing Date📅" data-balloon-pos="down" class="time-info"><svg viewBox="0 0 1030 1024" xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z" fill="currentColor"></path></svg> <span>2019-08-15 </span></span><span role="navigation" aria-label="Category🌈" data-balloon-pos="down" class="category-info enable"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon category-icon"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z" fill="currentColor"></path></svg> <span>JavaSE</span></span><!----><span aria-label="Reading Time⌛" data-balloon-pos="down" class="read-time-info"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon time-icon"><path d="M511.997 70.568c-243.797 0-441.429 197.633-441.429 441.435 0 243.797 197.632 441.429 441.43 441.429S953.431 755.8 953.431 512.002c0-243.796-197.637-441.434-441.435-441.434zm150.158 609.093l-15.605 15.61c-8.621 8.615-22.596 8.615-31.215 0L472.197 552.126c-4.95-4.944-4.34-14.888-4.34-24.677V247.14c0-12.19 9.882-22.07 22.07-22.07h22.07c12.19 0 22.07 9.882 22.07 22.07v273.218l128.088 128.088c8.62 8.62 8.62 22.595 0 31.215zm0 0" fill="currentColor"></path></svg> <span>About 16 min</span></span></div> <hr></div> <!----> <div class="anchor-place-holder"><aside id="anchor"><div class="anchor-wrapper"><ul class="anchor-list"></ul></div></aside></div> <div class="theme-default-content content__default"><h2 id="初识jdbc"><a href="#初识jdbc" class="header-anchor">#</a> 初识JDBC</h2> <p>如果我们要使用<code>Java</code>来操作数据库，由于数据库的种类繁多，并且<code>sql</code>语句并不完全相同，总而言之不同的数据库千差万别，这是不是意味着我们要对不同的数据库写不同的程序，这样的话对程序员的要求有点高，并且学习的成本也很大，所以我们要定义一套规范，要求对所有的数据库程序员只要写相同的程序就可以了。就相当于插座，我们定义好插座的标准，那么所有的商家必须按我的标准来，否则就不能使用插座。同理，在Java中定义好数据库的接口，定义接口中的方法有什么作用，而具体的实现细节则有数据库的厂商进行编写，程序员只要调用接口里面的方法就可以了。这里给出一个摘至维基百科的定义</p> <blockquote><p>Java Database Connectivity (JDBC) is an application programming interface (API) for the programming language Java, which defines how a client may access a database. It is a Java-based data access technology used for Java database connectivity.</p></blockquote> <p>所以使用<code>JDBC</code>的好处便显而易见</p> <ul><li>程序员如果要开发访问数据库的程序，只需要会调用<code>JDBC</code>接口中的方法即可，不用关注类是如何实现的</li> <li>使用同一套<code>Java</code>代码，进行少量的修改就可以访问其他<code>JDBC</code>支持的数据库</li></ul> <p>我们使用<code>Java</code>操作数据库，会使用到数据库的驱动，由各大数据库厂商提供，需要额外去下载，里面是对<code>JDBC</code>接口实现的类，导入驱动jar包的具体的步骤如下</p> <ul><li>在项目中新建一个<code>libs</code>文件夹</li> <li>将<code>jar</code>包复制到这个文件夹中</li> <li>选中这个<code>jar</code>包，右击找到<code>&quot;Add as Library&quot;</code></li></ul> <p>上面是导入<code>jar</code>包的通用步骤，后面会经常导入<code>jar</code>包，所以需要熟记。</p> <h3 id="第一个jdbc程序"><a href="#第一个jdbc程序" class="header-anchor">#</a> 第一个JDBC程序</h3> <p>使用<code>Java</code>操作数据库一般包括下面几步</p> <ul><li>注册驱动</li> <li>获得连接数据库的对象</li> <li>获得执行<code>sql</code>语句的对象</li> <li>执行<code>sql</code>语句</li> <li>释放资源(断开连接)</li></ul> <p>程序如下(具体类后面解释)</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">Connection</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">DriverManager</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">Statement</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo01</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>
        <span class="token comment">//注册驱动</span>
        <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token comment">//获取连接</span>
        <span class="token class-name">Connection</span> conn <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token string">&quot;jdbc:mysql://localhost:3306/db1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token comment">//创建sql语句</span>
        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;update account set balance = 2000 where id = 1&quot;</span><span class="token punctuation">;</span>

        <span class="token comment">//创建执行sql语句的对象</span>
        <span class="token class-name">Statement</span> statement <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">createStatement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//执行sql语句</span>
        statement<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//释放资源</span>
        statement<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        conn<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="核心类"><a href="#核心类" class="header-anchor">#</a> 核心类</h3> <p>下面就详细介绍<code>JDBC</code>的核心类(接口)以及它们的功能</p> <ul><li><code>DriverManager</code>：驱动管理对象，功能如下
<ul><li>注册驱动：告诉程序该使用哪一个数据库驱动<code>jar</code>包
<ul><li><code>mysql5</code>之后可以省略注册驱动的步骤，即不需要写<code>Class.forName()</code></li></ul></li> <li>获取数据库连接
<ul><li><code>static Connection getConnection(String url, String user, String password)</code> <ul><li><code>url</code>：连接的路径
<ul><li>格式：<code>jdbc:mysql://ip地址(域名):端口号/数据库名称?参数=参数值</code> <ul><li>例子：<code>jdbc:mysql://localhost:3306/db1</code></li> <li>如果<code>ip</code>地址为本机地址且端口号为<code>3306</code>，则上面可省略<code>ip</code>地址和端口号，简写为：<code>jdbc:mysql:///db1</code></li></ul></li> <li>如果出现乱码问题，可以指定参数<code>?characterEncoding=utf8</code></li></ul></li> <li><code>user</code>：用户名</li> <li><code>password</code>：密码</li></ul></li></ul></li></ul></li> <li><code>Connection</code>：数据库连接对象，相当于是在Java程序与数据库之间建立了一条通道，功能如下
<ul><li>获取执行<code>sql</code>的对象
<ul><li><code>Statement createStatement()</code></li> <li><code>PreparedStatement prepareStatement(String sql)</code></li></ul></li> <li>管理事务
<ul><li>开启事务：<code>setAutoCommit(boolean autoCommit)</code>，传入<code>false</code>即开启事务</li> <li>提交事务：<code>commit()</code></li> <li>回滚事务：<code>rollback()</code></li></ul></li></ul></li> <li><code>Statement</code>：执行<code>sql</code>的对象，含有如下方法
<ul><li><code>boolean execute(String sql)</code>：可以执行任意的<code>sql</code>语句，不常用，了解即可</li> <li><code>int executeUpdate(String sql)</code> <ul><li>执行<code>DML(insert、update、delete)</code>语句、<code>DDL(create，alter、drop)</code>语句</li> <li>返回值：影响的行数，可以通过这个影响的行数判断<code>DML</code>语句是否执行成功 返回值<code>&gt;0</code>的则执行成功，反之，则失败。</li></ul></li> <li><code>ResultSet executeQuery(String sql)</code>：执行<code>DQL(select)</code>语句</li></ul></li> <li><code>ResultSet</code>：结果集对象，封装查询结果，数据库通过通道返回的结果
<ul><li><code>boolean next()</code> <ul><li>判断游标所指向的行是否为空</li></ul></li> <li><code>getXxx()</code> <ul><li><code>getXxx(int columnIndex)</code> <ul><li>根据列数来获得数据</li></ul></li> <li><code>getXxx(int columnLabel)</code> <ul><li>根据列名称获得数据</li></ul></li></ul></li></ul></li></ul> <p>这里给出一个使用<code>ResultSet</code>的例子，比如我们要去查询<code>account</code>表</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">Connection</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">DriverManager</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">ResultSet</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">Statement</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo02</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Connection</span> conn <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token string">&quot;jdbc:mysql:///db1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;user&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Statement</span> statement <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">createStatement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;select * from account&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">ResultSet</span> resultSet <span class="token operator">=</span> statement<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token comment">//将查询到的数据打印出来</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>resultSet<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//根据列名查询数据</span>
            <span class="token keyword">int</span> id <span class="token operator">=</span> resultSet<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> name <span class="token operator">=</span> resultSet<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">double</span> balance <span class="token operator">=</span> resultSet<span class="token punctuation">.</span><span class="token function">getDouble</span><span class="token punctuation">(</span><span class="token string">&quot;balance&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>id <span class="token operator">+</span> <span class="token string">&quot;---&quot;</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">&quot;---&quot;</span> <span class="token operator">+</span> balance<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        
        resultSet<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        statement<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        conn<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="jdbc工具类"><a href="#jdbc工具类" class="header-anchor">#</a> JDBC工具类</h3> <p>其实上面的代码并不是十分的规范，因为资源的释放可能不能释放成功，因为前面发生异常就可以导致后面的程序执行不到，这样资源无法释放，就会导致内存越用越少(内存泄漏)，所以我们应当将资源释放的代码写到<code>finally</code>代码块中，如下</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">Connection</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">DriverManager</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">SQLException</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">Statement</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo01</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//定义在try代码块外是为了在finally中能够访问</span>
        <span class="token class-name">Connection</span> conn <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token class-name">Statement</span> statement <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            conn <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token string">&quot;jdbc:mysql:///db1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            statement <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">createStatement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;update account set balance = 2000 where id = 1&quot;</span><span class="token punctuation">;</span>
            statement<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>statement <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    statement<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            
            <span class="token keyword">if</span> <span class="token punctuation">(</span>conn <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    conn<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这时我们发现代码十分的冗长(特别是资源释放的部分)，并且每次写代码都会重复这些，再者程序所连接的数据库是写死的，如果需要改变的话还需要改动程序，我们可以将这些信息写在一个<code>jdbc.properties</code>的配置文件中，如果有改动直接改动配置文件即可</p> <div class="language- extra-class"><pre class="language-text"><code>url=jdbc:mysql:///db1
user=root
password=root
driver=com.mysql.jdbc.Driver
</code></pre></div><p>将上面的这些操作抽离出来，写一个<code>JDBC</code>的工具类，在工具类中读取配置文件，以及抽离出一些方法，这样不用每次都写这么长的代码</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">FileNotFoundException</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">FileReader</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>net<span class="token punctuation">.</span></span>URL<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Properties</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JDBCUtils</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">String</span> url<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">String</span> user<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">String</span> password<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">String</span> driver<span class="token punctuation">;</span>
	
    <span class="token comment">//读取jdbc.properties中的内容 获得url user password driver等信息</span>
    <span class="token comment">//因为只需要读取一次，所以写在static代码块中</span>
    <span class="token keyword">static</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">Properties</span> properties <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">ClassLoader</span> classLoader <span class="token operator">=</span> <span class="token class-name">JDBCUtils</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">URL</span> res <span class="token operator">=</span> classLoader<span class="token punctuation">.</span><span class="token function">getResource</span><span class="token punctuation">(</span><span class="token string">&quot;jdbc.properties&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> path <span class="token operator">=</span> res<span class="token punctuation">.</span><span class="token function">getPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            properties<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            url <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;url&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            user <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            password <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            driver <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span>driver<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">FileNotFoundException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ClassNotFoundException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
	
    <span class="token comment">//返回连接对象</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Connection</span> <span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> user<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
	
    <span class="token comment">//释放资源</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token class-name">Connection</span> conn<span class="token punctuation">,</span> <span class="token class-name">Statement</span> stam<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>stam <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                stam<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>conn <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                conn<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
	
    <span class="token comment">//释放资源</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token class-name">Connection</span> conn<span class="token punctuation">,</span> <span class="token class-name">Statement</span> stam<span class="token punctuation">,</span> <span class="token class-name">ResultSet</span> resultSet<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>resultSet <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                resultSet<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token comment">//复用上面的代码</span>
        <span class="token function">close</span><span class="token punctuation">(</span>conn<span class="token punctuation">,</span> stam<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><h3 id="用户登录练习"><a href="#用户登录练习" class="header-anchor">#</a> 用户登录练习</h3> <p>我们来写一个方法来判断用户输入的用户名和密码是否正确，思路就是根据用户输入的用户名和密码去数据库中查询，如果返回的<code>ResultSet</code>有内容，那么就确定输入正确，否则失败。假设有下面这么一个表(<code>user</code>)</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token operator">+</span><span class="token comment">------+----------+----------+</span>
<span class="token operator">|</span> id   <span class="token operator">|</span> <span class="token keyword">user</span>     <span class="token operator">|</span> password <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+----------+----------+</span>
<span class="token operator">|</span>    <span class="token number">1</span> <span class="token operator">|</span> zhangsan <span class="token operator">|</span> <span class="token number">123</span>      <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">2</span> <span class="token operator">|</span> lisi     <span class="token operator">|</span> <span class="token number">345</span>      <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+----------+----------+</span>
</code></pre></div><p>下面是检查用户名和密码的方法</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">boolean</span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token class-name">String</span> user<span class="token punctuation">,</span> <span class="token class-name">String</span> password<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Connection</span> conn <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token class-name">Statement</span> statement <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token class-name">ResultSet</span> resultSet <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        conn <span class="token operator">=</span> <span class="token class-name">JDBCUtils</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        statement <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">createStatement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token comment">//拼接user和password未一个sql语句</span>
        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;select * from user where user = '&quot;</span> <span class="token operator">+</span> user <span class="token operator">+</span> <span class="token string">&quot;' and password = '&quot;</span> <span class="token operator">+</span>  password <span class="token operator">+</span> <span class="token string">&quot;'&quot;</span><span class="token punctuation">;</span>
        resultSet <span class="token operator">=</span> statement<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token comment">//如果返回有数据则返回true 否则返回false</span>
        <span class="token keyword">return</span> resultSet<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
        <span class="token class-name">JDBCUtils</span><span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span>conn<span class="token punctuation">,</span> statement<span class="token punctuation">,</span> resultSet<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>下面在<code>main</code>方法中写测试代码</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//用户输入用户名和密码</span>
    <span class="token class-name">Scanner</span> scanner <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;请输入用户名：&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> user <span class="token operator">=</span> scanner<span class="token punctuation">.</span><span class="token function">nextLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;请输入密码：&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> password <span class="token operator">=</span> scanner<span class="token punctuation">.</span><span class="token function">nextLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token keyword">boolean</span> flag <span class="token operator">=</span> <span class="token function">login</span><span class="token punctuation">(</span>user<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>flag<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;登录成功&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;用户名或密码错误&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>我们来试验一下</p> <div class="language-java extra-class"><pre class="language-java"><code>请输入用户名：
lisi
请输入密码：
<span class="token number">234</span>
用户名或密码错误
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code>请输入用户名：
zhangsan
请输入密码：
<span class="token number">123</span>
登录成功
</code></pre></div><h3 id="preparedstatement"><a href="#preparedstatement" class="header-anchor">#</a> PreparedStatement</h3> <p><code>PreparedStatement</code>的作用同<code>Statement</code>，也是用来执行<code>sql</code>命令的，但是已经有了<code>Statement</code>，为什么还需要<code>PreparedStatement</code>呢? 那就要知道<code>Statement</code>存在什么问题，我们来看上面的用户登录程序，如果我们登录时这么写</p> <div class="language-java extra-class"><pre class="language-java"><code>请输入用户名：
daad
请输入密码：
a<span class="token string">' or '</span>a<span class="token string">' = '</span>a
登录成功
</code></pre></div><p>得到的结果居然登录成功了，因为<code>sql</code>语句被拼接成了</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token keyword">user</span> <span class="token keyword">where</span> <span class="token keyword">user</span> <span class="token operator">=</span> <span class="token string">'daad'</span> <span class="token operator">and</span> password <span class="token operator">=</span> <span class="token string">'a'</span> <span class="token operator">or</span> <span class="token string">'a'</span> <span class="token operator">=</span> <span class="token string">'a'</span><span class="token punctuation">;</span>
</code></pre></div><p>最后的<code>or ‘a’ = ‘a’</code>得到的永远是true，所以总是可以得到返回结果，所以自然会显示登录成功，这种情况叫做<code>SQL</code>注入。<code>PreparedStatement</code>正是为了解决这一个问题的，上面出现问题是因为我们的<code>sql</code>语句是拼接而成的，所以才会出现问题，<code>PreparedStatement</code>采取的办法是首先使用<code>?</code>占据位置(占位符)，然后对<code>?</code>所占据的位置进行赋值，赋值的方法为</p> <ul><li><code>setXxx()</code>：接收两个参数
<ul><li>第一个参数表示为第几个占位符赋值，从<code>1</code>开始</li> <li>第二个参数是值</li></ul></li></ul> <p>所以我们将上面的登录代码修改如下</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">boolean</span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token class-name">String</span> user<span class="token punctuation">,</span> <span class="token class-name">String</span> password<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Connection</span> conn <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token class-name">PreparedStatement</span> preparedStatement <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token class-name">ResultSet</span> resultSet <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        conn <span class="token operator">=</span> <span class="token class-name">JDBCUtils</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//使用?作为占位符</span>
        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;select * from user where user = ? and password = ?&quot;</span><span class="token punctuation">;</span>
        <span class="token comment">//创建PreparedStatement对象</span>
        preparedStatement <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//为占位符赋值</span>
        preparedStatement<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>
        preparedStatement<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//不需要传入sql</span>
        resultSet <span class="token operator">=</span> preparedStatement<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//如果返回有数据则返回true 否则返回false</span>
        <span class="token keyword">return</span> resultSet<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
        <span class="token class-name">JDBCUtils</span><span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span>conn<span class="token punctuation">,</span> preparedStatement<span class="token punctuation">,</span> resultSet<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这时还是使用与上面相同的操作</p> <div class="language-java extra-class"><pre class="language-java"><code>请输入用户名：
dadd
请输入密码：
a or <span class="token string">'a'</span> <span class="token operator">=</span> <span class="token string">'a'</span>
用户名或密码错误
</code></pre></div><p>在实际中我们一般使用<code>PreparedStatement</code>，因为它不仅可以防止<code>SQL</code>注入，并且效率更高。</p> <h2 id="jdbc事务"><a href="#jdbc事务" class="header-anchor">#</a> JDBC事务</h2> <p>事务就是一组<code>sql</code>操作，这一组<code>sql</code>操作要么同时成功，要么同时失败。比如转账，一方钱的支出与另一方钱的到账必须同时成功或者同时失败，没有这里钱转出去了，另一方却没有到账的情况。有关事务一般包含下面三个操作</p> <ul><li>开启事务
<ul><li><code>setAutoCommit(false)</code></li> <li>开启事务后，直至提交，执行的<code>sql</code>语句不会在数据库中生效，而是会写在日志中，只有提交后才会将根据日志修改数据库中的数据</li> <li>默认是自动提交的，即每次执行一次<code>sql</code>命令都会更改数据库中的内容，我们将自动提交关闭就相当于是开启了事务</li></ul></li> <li>提交事务
<ul><li><code>commit()</code></li></ul></li> <li>回滚事务
<ul><li><code>rollback()</code></li> <li>事务执行失败，这时我们就要回到执行事务前的状态，这时会把日志中的内容清空</li> <li>一般在<code>catch</code>代码块中进行回滚操作</li></ul></li></ul> <p>假设有下面这么一个表</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token operator">+</span><span class="token comment">----+------+---------+</span>
<span class="token operator">|</span> id <span class="token operator">|</span> NAME <span class="token operator">|</span> balance <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+------+---------+</span>
<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> 张三 <span class="token operator">|</span>    <span class="token number">2000</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">2</span> <span class="token operator">|</span> 李四 <span class="token operator">|</span>    <span class="token number">1000</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+------+---------+</span>
</code></pre></div><p>现在张三要给李四转500块钱</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">Connection</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">PreparedStatement</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">SQLException</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo04</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//转账的金额</span>
        <span class="token keyword">double</span> money <span class="token operator">=</span> <span class="token number">500</span><span class="token punctuation">;</span>

        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token class-name">PreparedStatement</span> preparedStatement1 <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token class-name">PreparedStatement</span> preparedStatement2 <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            connection <span class="token operator">=</span> <span class="token class-name">JDBCUtils</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> sql1 <span class="token operator">=</span> <span class="token string">&quot;update account set balance = balance - ? where id = ?&quot;</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> sql2 <span class="token operator">=</span> <span class="token string">&quot;update account set balance = balance + ? where id = ?&quot;</span><span class="token punctuation">;</span>

            preparedStatement1 <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql1<span class="token punctuation">)</span><span class="token punctuation">;</span>
            preparedStatement1<span class="token punctuation">.</span><span class="token function">setDouble</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> money<span class="token punctuation">)</span><span class="token punctuation">;</span>
            preparedStatement1<span class="token punctuation">.</span><span class="token function">setInt</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            preparedStatement2 <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql2<span class="token punctuation">)</span><span class="token punctuation">;</span>
            preparedStatement2<span class="token punctuation">.</span><span class="token function">setDouble</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> money<span class="token punctuation">)</span><span class="token punctuation">;</span>
            preparedStatement2<span class="token punctuation">.</span><span class="token function">setInt</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            preparedStatement1<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            preparedStatement2<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
            <span class="token class-name">JDBCUtils</span><span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span>connection<span class="token punctuation">,</span> preparedStatement1<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//因为connection已经关闭了，所以传入null</span>
            <span class="token class-name">JDBCUtils</span><span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> preparedStatement2<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>执行上面的程序然后再次查表得</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span>
<span class="token operator">|</span> id <span class="token operator">|</span> NAME <span class="token operator">|</span> balance <span class="token operator">|</span>
<span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span>
<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> 张三 <span class="token operator">|</span>    <span class="token number">1500</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">2</span> <span class="token operator">|</span> 李四 <span class="token operator">|</span>    <span class="token number">1500</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span>
</code></pre></div><p>但是如果我们在执行张三支出500块后手动添加一个异常，这时李四则不会收到500块</p> <div class="language-java extra-class"><pre class="language-java"><code>preparedStatement1<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">3</span> <span class="token operator">/</span> <span class="token number">0</span><span class="token punctuation">;</span>
preparedStatement2<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token operator">+</span><span class="token comment">----+------+---------+</span>
<span class="token operator">|</span> id <span class="token operator">|</span> NAME <span class="token operator">|</span> balance <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+------+---------+</span>
<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> 张三 <span class="token operator">|</span>    <span class="token number">1000</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">2</span> <span class="token operator">|</span> 李四 <span class="token operator">|</span>    <span class="token number">1500</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+------+---------+</span>
</code></pre></div><p>张三的钱减少了500块，但是李四却没有收到。这就是问题，所以我们要开启事务，并且在<code>catch</code>代码块中进行回滚</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">Connection</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">PreparedStatement</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">SQLException</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo04</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">double</span> money <span class="token operator">=</span> <span class="token number">500</span><span class="token punctuation">;</span>

        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token class-name">PreparedStatement</span> preparedStatement1 <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token class-name">PreparedStatement</span> preparedStatement2 <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            connection <span class="token operator">=</span> <span class="token class-name">JDBCUtils</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            
            <span class="token comment">//开启事务</span>
            connection<span class="token punctuation">.</span><span class="token function">setAutoCommit</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            
            <span class="token class-name">String</span> sql1 <span class="token operator">=</span> <span class="token string">&quot;update account set balance = balance - ? where id = ?&quot;</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> sql2 <span class="token operator">=</span> <span class="token string">&quot;update account set balance = balance + ? where id = ?&quot;</span><span class="token punctuation">;</span>

            preparedStatement1 <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql1<span class="token punctuation">)</span><span class="token punctuation">;</span>
            preparedStatement1<span class="token punctuation">.</span><span class="token function">setDouble</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> money<span class="token punctuation">)</span><span class="token punctuation">;</span>
            preparedStatement1<span class="token punctuation">.</span><span class="token function">setInt</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            preparedStatement2 <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql2<span class="token punctuation">)</span><span class="token punctuation">;</span>
            preparedStatement2<span class="token punctuation">.</span><span class="token function">setDouble</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> money<span class="token punctuation">)</span><span class="token punctuation">;</span>
            preparedStatement2<span class="token punctuation">.</span><span class="token function">setInt</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            preparedStatement1<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">3</span> <span class="token operator">/</span> <span class="token number">0</span><span class="token punctuation">;</span>
            preparedStatement2<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">//提交事务</span>
            connection<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>connection <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token comment">//回滚事务</span>
                    connection<span class="token punctuation">.</span><span class="token function">rollback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e1<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                e1<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
            <span class="token class-name">JDBCUtils</span><span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span>connection<span class="token punctuation">,</span> preparedStatement1<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">JDBCUtils</span><span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> preparedStatement2<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这次再次执行</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token operator">+</span><span class="token comment">----+------+---------+</span>
<span class="token operator">|</span> id <span class="token operator">|</span> NAME <span class="token operator">|</span> balance <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+------+---------+</span>
<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> 张三 <span class="token operator">|</span>    <span class="token number">1000</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">2</span> <span class="token operator">|</span> 李四 <span class="token operator">|</span>    <span class="token number">1500</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+------+---------+</span>
</code></pre></div><p>虽然还是发生了异常，但是张三和李四并没有发生上面一方转出一方没有到账的情况，而是转账失败。</p> <h2 id="数据库连接池"><a href="#数据库连接池" class="header-anchor">#</a> 数据库连接池</h2> <p>每次我们使用完连接对象后都会将该对象销毁，然后下次需要连接对象时又需要重新创建。如果考虑到有频繁的操作数据库的操作，每次创建销毁的开销是很大的，所以就有了数据库连接池，里面有很多的连接对象，当我们需要时就从里面拿，用完之后不是销毁，而是将对象归还给连接池，这样做能够有效的提升程序的性能。Java定义了一个<code>DataSource</code>接口，我们可以通过该接口的<code>getConnection()</code>方法获取一个连接，并且可以通过<code>close()</code>方法归还这个连接(前提是这个连接是从连接池中获得的)。<code>DataSource</code>接口的实现我们不需要关心，我们只要知道如何使用即可，我们学习如何使用两种数据库连接池技术</p> <ul><li><code>C3P0</code></li> <li><code>Druid</code>：阿里巴巴提供，目前最好的数据库连接池之一</li></ul> <h3 id="c3p0"><a href="#c3p0" class="header-anchor">#</a> C3P0</h3> <p><code>C3P0</code>的使用步骤</p> <ol><li>导入<code>jar</code>包
<ul><li><code>c3p0-0.9.5.2.jar</code></li> <li><code>mchange-commons-java-0.2.12.jar</code></li></ul></li> <li>定义配置文件
<ul><li>只能为<code>c3p0-config.xml</code>或<code>c3p0.properties</code>，配置文件需放在<code>src</code>目录下</li></ul></li> <li>使用实现类<code>ComboPooledDataSource</code>获得连接池对象</li></ol> <p>下面给出配置文件<code>c3p0-config.xml</code>的内容</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>c3p0-config</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 使用默认的配置读取连接池对象 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>default-config</span><span class="token punctuation">&gt;</span></span>
  	<span class="token comment">&lt;!--  连接参数 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>driverClass<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>com.mysql.jdbc.Driver<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jdbcUrl<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>jdbc:mysql:///db1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>root<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>root<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    
    <span class="token comment">&lt;!-- 连接池参数 --&gt;</span>
      <span class="token comment">&lt;!--初始连接对象数--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>initialPoolSize<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!--最大连接对象数--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>maxPoolSize<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>10<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!--最大等待时间 3s--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>checkoutTimeout<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>3000<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>default-config</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>c3p0-config</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>下面给出一个使用的示例</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>mchange<span class="token punctuation">.</span>v2<span class="token punctuation">.</span>c3p0<span class="token punctuation">.</span></span><span class="token class-name">ComboPooledDataSource</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">DataSource</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">Connection</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">SQLException</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo05</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span> <span class="token punctuation">{</span>
        <span class="token comment">//获得连接池对象</span>
        <span class="token class-name">DataSource</span> ds <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ComboPooledDataSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//获取连接</span>
        <span class="token class-name">Connection</span> conn <span class="token operator">=</span> ds<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="druid"><a href="#druid" class="header-anchor">#</a> Druid</h3> <p><code>Druid</code>的使用步骤</p> <ol><li>导入<code>jar</code>包
<ul><li><code>druid-1.0.9.jar</code></li></ul></li> <li>定义配置文件
<ul><li><code>.properties</code>文件</li> <li>可以放置在任何的地方</li></ul></li> <li>使用工厂方法<code>DruidDataSourceFactory.createDataSource()</code>获得连接池
<ul><li>需要传入一个<code>Properties</code>对象(配置文件)</li></ul></li></ol> <p>下面给出<code>druid.properties</code>的内容</p> <div class="language- extra-class"><pre class="language-text"><code>driverClassName=com.mysql.jdbc.Driver
url=jdbc:mysql:///db1
username=root
password=root
initialSize=5
maxActive=10
maxWait=3000
</code></pre></div><p>想必上面的各参数的含义不必解释，那么就给出一个使用<code>Druid</code>的例子</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>alibaba<span class="token punctuation">.</span>druid<span class="token punctuation">.</span>pool<span class="token punctuation">.</span></span><span class="token class-name">DruidDataSourceFactory</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">DataSource</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">InputStream</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">Connection</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Properties</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo06</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">Properties</span> pro <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//得到配置文件的输入流对象</span>
        <span class="token class-name">InputStream</span> is <span class="token operator">=</span> <span class="token class-name">Demo06</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">&quot;druid.properties&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        pro<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>is<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">DataSource</span> ds <span class="token operator">=</span> <span class="token class-name">DruidDataSourceFactory</span><span class="token punctuation">.</span><span class="token function">createDataSource</span><span class="token punctuation">(</span>pro<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Connection</span> conn <span class="token operator">=</span> ds<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="工具类"><a href="#工具类" class="header-anchor">#</a> 工具类</h3> <p>我们发现每次使用连接池时会有很多重复的操作，同上面我们应该写一个工具类<code>JDBCUtils</code>将一些操作抽离出来，<code>JDBCUtils</code>类如下</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>alibaba<span class="token punctuation">.</span>druid<span class="token punctuation">.</span>pool<span class="token punctuation">.</span></span><span class="token class-name">DruidDataSourceFactory</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">DataSource</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Properties</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JDBCUtils</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">DataSource</span> ds<span class="token punctuation">;</span>

    <span class="token comment">//读取配置文件 初始化连接池对象</span>
    <span class="token keyword">static</span> <span class="token punctuation">{</span>
        <span class="token class-name">Properties</span> pro <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            pro<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token class-name">JDBCUtils</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">&quot;druid.properties&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            ds <span class="token operator">=</span> <span class="token class-name">DruidDataSourceFactory</span><span class="token punctuation">.</span><span class="token function">createDataSource</span><span class="token punctuation">(</span>pro<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
	
    <span class="token comment">//返回连接对象</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Connection</span> <span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> ds<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
	
    <span class="token comment">//关闭资源</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token class-name">Connection</span> conn<span class="token punctuation">,</span> <span class="token class-name">Statement</span> stam<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>stam <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                stam<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>conn <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                conn<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token class-name">Connection</span> conn<span class="token punctuation">,</span> <span class="token class-name">Statement</span> stam<span class="token punctuation">,</span> <span class="token class-name">ResultSet</span> resultSet<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>resultSet <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                resultSet<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
		
        <span class="token comment">//复用上面的代码</span>
        <span class="token function">close</span><span class="token punctuation">(</span>conn<span class="token punctuation">,</span> stam<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">//返回连接池对象</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">DataSource</span> <span class="token function">getDataSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> ds<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="spring-jdbc"><a href="#spring-jdbc" class="header-anchor">#</a> Spring JDBC</h2> <p><code>Spring</code>对<code>JDBC</code>进行了简单的封装，提供了一个<code>JdbcTemplate</code>对象来简化<code>JDBC</code>的开发，使用步骤为</p> <ol><li>导入<code>jar</code>包
<ul><li><code>spring-beans-5.0.0.RELEASE.jar</code></li> <li><code>spring-core-5.0.0.RELEASE.jar</code></li> <li><code>spring-jdbc-5.0.0.RELEASE.jar</code></li> <li><code>spring-tx-5.0.0.RELEASE.jar</code></li> <li><code>commons-logging-1.2.jar</code></li></ul></li> <li>创建<code>JdbcTemplate</code>对象
<ul><li><code>new JdbcTemplate(ds)</code>：<code>ds</code>为数据库连接池对象</li></ul></li> <li>使用<code>JdbcTemplate</code>对象的方法对数据库进行操作
<ul><li><code>update()</code>：执行<code>DML</code>语句
<ul><li>第一个参数为<code>sql</code>语句</li> <li>第二个参数为可变参数，是占位符<code>?</code>所对应的值</li></ul></li> <li><code>queryForMap()</code>：将结果封装为<code>Map</code>对象
<ul><li>只能查询一行数据，将结果封装为<code>Map</code>对象</li> <li>将列名最为<code>Key</code>，将字段值作为<code>Value</code></li></ul></li> <li><code>queryForList()</code>：将结果封装为<code>List</code>对象
<ul><li>查询多行数据，每一行数据封装为一个<code>Map</code>对象，这些<code>Map</code>对象会被添加到一个<code>List</code>集合中返回</li></ul></li> <li><code>queryForObject()</code>：将结果封装为对象
<ul><li>用以查询一些聚合函数</li></ul></li> <li><code>query()</code>：将结果封装为<code>JavaBean</code>对象</li></ul></li></ol> <p>下面就来做一个简单的演示，假设<code>db1</code>数据库中有一张表<code>account</code>其中内容如下</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token operator">+</span><span class="token comment">----+------+---------+</span>
<span class="token operator">|</span> id <span class="token operator">|</span> NAME <span class="token operator">|</span> balance <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+------+---------+</span>
<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> 张三 <span class="token operator">|</span>    <span class="token number">1000</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">2</span> <span class="token operator">|</span> 李四 <span class="token operator">|</span>    <span class="token number">1000</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+------+---------+</span>
</code></pre></div><h3 id="update"><a href="#update" class="header-anchor">#</a> update</h3> <p>现在我们使用<code>update</code>命令修改张三的<code>balance</code>为2000</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span><span class="token class-name">Test</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span><span class="token class-name">JdbcTemplate</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo07</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">JdbcTemplate</span> template <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JdbcTemplate</span><span class="token punctuation">(</span><span class="token class-name">JDBCUtils</span><span class="token punctuation">.</span><span class="token function">getDataSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">//Junit单元测试 方法可以单独执行 不需要写在main方法中</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;update account set balance = 2000 where id = ?&quot;</span><span class="token punctuation">;</span>
        template<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>我们再次查询<code>account</code>表</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token operator">+</span><span class="token comment">----+------+---------+</span>
<span class="token operator">|</span> id <span class="token operator">|</span> NAME <span class="token operator">|</span> balance <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+------+---------+</span>
<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> 张三 <span class="token operator">|</span>    <span class="token number">2000</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">2</span> <span class="token operator">|</span> 李四 <span class="token operator">|</span>    <span class="token number">1000</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+------+---------+</span>
</code></pre></div><h3 id="queryformap"><a href="#queryformap" class="header-anchor">#</a> queryForMap</h3> <p>查询张三所在行<code>(id = 1)</code>，得到一个<code>Map</code>对象，我们将其打印出来</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testQueryForMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;select * from account where id = ?&quot;</span><span class="token punctuation">;</span>
    <span class="token class-name">Map</span> map <span class="token operator">=</span> template<span class="token punctuation">.</span><span class="token function">queryForMap</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>结果为</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token punctuation">{</span>id<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> NAME<span class="token operator">=</span>张三<span class="token punctuation">,</span> balance<span class="token operator">=</span><span class="token number">2000.0</span><span class="token punctuation">}</span>
</code></pre></div><h3 id="queryforlist"><a href="#queryforlist" class="header-anchor">#</a> queryForList</h3> <p>如果我们需要查询多条数据怎么办，这个时候就使用<code>queryForList</code>，它会将每条数据封装为<code>Map</code>集合，然后将这些<code>Map</code>集合添加到<code>List</code>集合中</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testQueryForList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;select * from account&quot;</span><span class="token punctuation">;</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> mapList <span class="token operator">=</span> template<span class="token punctuation">.</span><span class="token function">queryForList</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map<span class="token operator">:</span> mapList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>得到的结果为</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token punctuation">{</span>id<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> NAME<span class="token operator">=</span>张三<span class="token punctuation">,</span> balance<span class="token operator">=</span><span class="token number">2000.0</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span>id<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span> NAME<span class="token operator">=</span>李四<span class="token punctuation">,</span> balance<span class="token operator">=</span><span class="token number">1000.0</span><span class="token punctuation">}</span>
</code></pre></div><h3 id="query"><a href="#query" class="header-anchor">#</a> query</h3> <p>更多的时候我们希望将得到的结果封装为一个对象，现在我们新建一个类<code>Account</code>如下</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Account</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Double</span> balance<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> id<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setId</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Double</span> <span class="token function">getBalance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> balance<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setBalance</span><span class="token punctuation">(</span><span class="token class-name">Double</span> balance<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>balance <span class="token operator">=</span> balance<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;Account{&quot;</span> <span class="token operator">+</span>
                <span class="token string">&quot;id=&quot;</span> <span class="token operator">+</span> id <span class="token operator">+</span>
                <span class="token string">&quot;, name='&quot;</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">'\''</span> <span class="token operator">+</span>
                <span class="token string">&quot;, balance=&quot;</span> <span class="token operator">+</span> balance <span class="token operator">+</span>
                <span class="token string">'}'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>现在我们希望将获得结果封装为一个个<code>Account</code>对象，这时我们就需要使用<code>query()</code>方法了，<code>query</code>方法的第一个参数是<code>sql</code>语句，第二个参数是<code>RowMapper&lt;&gt;</code>的实现类，这个类我们可以自己实现，也可以使用<code>Spring</code>提供好的实现类，我们就使用<code>Spring</code>提供好的实现类<code>BeanPropertyRowMapper&lt;&gt;</code>，我们只要将<code>Account</code>的<code>class</code>属性传递进去即可</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;select * from account&quot;</span><span class="token punctuation">;</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Account</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> template<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">BeanPropertyRowMapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Account</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token class-name">Account</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Account</span> account <span class="token operator">:</span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>account<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>结果为</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Account</span><span class="token punctuation">{</span>id<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'张三'</span><span class="token punctuation">,</span> balance<span class="token operator">=</span><span class="token number">2000.0</span><span class="token punctuation">}</span>
<span class="token class-name">Account</span><span class="token punctuation">{</span>id<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'李四'</span><span class="token punctuation">,</span> balance<span class="token operator">=</span><span class="token number">1000.0</span><span class="token punctuation">}</span>
</code></pre></div><h3 id="queryforobject"><a href="#queryforobject" class="header-anchor">#</a> queryForObject</h3> <p>现在我们来查询<code>account</code>表中右多少条数据，我们使用聚合函数<code>count()</code>，得到的结果是一个<code>long</code>类型的数字，我们使用<code>queryForObject()</code>查询，接收两个参数，第一个参数是<code>sql</code>命令，第二个参数是返回类型的<code>class</code>属性</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testQueryForObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;select count(id) from account&quot;</span><span class="token punctuation">;</span>
    <span class="token class-name">Long</span> num <span class="token operator">=</span> template<span class="token punctuation">.</span><span class="token function">queryForObject</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span> <span class="token class-name">Long</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>结果为</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token number">2</span>
</code></pre></div><!----></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last update:</span> <span class="time">April 18, 2021 22:18</span></div></footer> <!----> <!----> </main> <!----></div><div class="global-ui"><!----><!----><div id="pwa-install"><!----> <div id="install-modal-wrapper" style="display:none;"><div class="background"></div> <div class="install-modal"><div class="header"><button aria-label="Close" class="close-button"><svg width="23" height="22" xmlns="http://www.w3.org/2000/svg" class="icon close-icon"><path fill-rule="evenodd" clip-rule="evenodd" d="M1.12.358a1.224 1.224 0 011.729 0l8.92 8.914L20.686.358a1.224 1.224 0 011.73 1.728L13.497 11l8.92 8.913a1.222 1.222 0 11-1.73 1.729l-8.919-8.913-8.92 8.913a1.224 1.224 0 01-1.729-1.729L10.04 11l-8.92-8.914a1.222 1.222 0 010-1.728z" fill="currentColor"></path></svg></button> <div class="logo"><!----> <div class="title"><h1></h1> <p class="desc">This app can be installed on your PC or mobile device.  This will allow this web app to look and behave like any other installed app.  You will find it in your app lists and be able to pin it to your home screen, start menus or task bars.  This installed web app will also be able to safely interact with other apps and your operating system. </p></div></div></div> <div class="content"><div class="highlight"><!----> <!----></div> <div class="description"><h3>Description</h3> <p></p></div></div> <div class="button-wrapper"><button class="install-button">
        Install <span></span></button> <button class="cancel-button">
        Cancel
      </button></div></div></div></div><div tabindex="-1" role="dialog" aria-hidden="true" class="pswp"><div class="pswp__bg"></div> <div class="pswp__scroll-wrap"><div class="pswp__container"><div class="pswp__item"></div> <div class="pswp__item"></div> <div class="pswp__item"></div></div> <div class="pswp__ui pswp__ui--hidden"><div class="pswp__top-bar"><div class="pswp__counter"></div> <button title="Close (Esc)" class="pswp__button pswp__button--close"></button> <button title="Share" class="pswp__button pswp__button--share"></button> <button title="Toggle fullscreen" class="pswp__button pswp__button--fs"></button> <button title="Zoom in/out" class="pswp__button pswp__button--zoom"></button> <div class="pswp__preloader"><div class="pswp__preloader__icn"><div class="pswp__preloader__cut"><div class="pswp__preloader__donut"></div></div></div></div></div> <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class="pswp__share-tooltip"></div></div> <button title="Previous (arrow left)" class="pswp__button pswp__button--arrow--left"></button> <button title="Next (arrow right)" class="pswp__button pswp__button--arrow--right"></button> <div class="pswp__caption"><div class="pswp__caption__center"></div></div></div></div></div><div class="my-popup" style="display:none;" data-v-5f98aac3><div class="my-popup-container" data-v-5f98aac3><div class="my-popup-exit" data-v-5f98aac3></div> <img src="" alt data-v-5f98aac3></div></div></div></div>
    <script src="/vuepress-blog/assets/js/app.6c4940a6.js" defer></script><script src="/vuepress-blog/assets/js/layout-Layout.a1d8ce1f.js" defer></script><script src="/vuepress-blog/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound.ad9e522a.js" defer></script><script src="/vuepress-blog/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound~layout-Slide.faf2ead7.js" defer></script><script src="/vuepress-blog/assets/js/vendors~layout-Blog~layout-Layout.d2f37dee.js" defer></script><script src="/vuepress-blog/assets/js/page-JDBC.6d4fa59a.js" defer></script>
  </body>
</html>
